<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"
    />

    <!-- Google Site Verification -->
    <meta
      name="google-site-verification"
      content="thYv9L2n1x3OAc20MYSQzfqLdZbjqRPHkPi6Um61xXk"
    />

    <!-- Additional SEO meta tags -->
    <meta name="robots" content="index, follow" />
    <meta
      name="googlebot"
      content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    />
    <meta
      name="bingbot"
      content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    />

    <title>DupeCheck - Free Duplicate Invoice Detector</title>
    <style>
      :root {
        --primary: #5865f2;
        --primary-dark: #4752c4;
        --secondary: #57f287;
        --warning: #fee75c;
        --danger: #ed4245;
        --bg-dark: #1a1b26;
        --bg-card: #2c2f33;
        --text-primary: #ffffff;
        --text-secondary: #b9bbbe;
        --border: rgba(255, 255, 255, 0.1);
      }

      html {
        scroll-behavior: smooth;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Inter",
          Roboto, Oxygen, Ubuntu, sans-serif;
        background: linear-gradient(135deg, #1a1b26 0%, #2c2f33 100%);
        color: var(--text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }

      /* Navigation */
      nav {
        padding: 1rem 2rem;
        background: rgba(26, 27, 38, 0.8);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 100;
      }

      .nav-container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .nav-left {
        display: flex;
        align-items: center;
      }

      .logo {
        text-decoration: none;
        transition: opacity 0.3s;
      }

      .logo:hover {
        opacity: 0.8;
      }

      .logo svg {
        width: 250px;
        height: 83px;
      }

      .nav-links {
        display: flex;
        gap: 1rem;
        align-items: center;
      }

      /* Auth Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 2rem;
        width: 90%;
        max-width: 400px;
        position: relative;
      }

      .modal-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        color: var(--text-secondary);
        font-size: 1.5rem;
        cursor: pointer;
      }

      .form-group {
        margin-bottom: 1rem;
      }

      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .form-group input {
        width: 100%;
        padding: 0.75rem;
        background: var(--bg-dark);
        border: 1px solid var(--border);
        border-radius: 8px;
        color: var(--text-primary);
        font-size: 1rem;
      }

      .form-group input:focus {
        outline: none;
        border-color: var(--primary);
      }

      .auth-tabs {
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
        border-bottom: 1px solid var(--border);
      }

      .auth-tab {
        padding: 0.5rem 1rem;
        background: none;
        border: none;
        color: var(--text-secondary);
        cursor: pointer;
        border-bottom: 2px solid transparent;
        transition: all 0.3s;
      }

      .auth-tab.active {
        color: var(--primary);
        border-bottom-color: var(--primary);
      }

      /* Usage Counter */
      .usage-counter {
        background: var(--bg-card);
        border: 1px solid var(--border);
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .usage-counter .count {
        color: var(--secondary);
        font-weight: 600;
      }

      .user-menu {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .user-display {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.5rem 1rem;
        background: rgba(44, 47, 51, 0.7);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 24px;
        backdrop-filter: blur(10px);
      }

      .user-button {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        height: 40px;
        max-width: 280px;
        padding: 0 12px 0 6px;
        background: rgba(44, 47, 51, 0.7);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 24px;
        color: var(--text-primary);
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 14px;
        font-family: inherit;
        backdrop-filter: blur(10px);
      }

      .user-button:hover {
        background: rgba(44, 47, 51, 0.9);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }

      .user-button:focus {
        outline: none;
        box-shadow: 0 0 0 2px rgba(88, 101, 242, 0.5);
      }

      .user-button.active {
        background: rgba(44, 47, 51, 0.95);
        border-color: var(--primary);
      }

      /* Avatar with initials */
      .user-avatar {
        flex-shrink: 0;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      /* Button content */
      .user-button-content {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        min-width: 0;
        flex: 1;
      }

      .user-email {
        font-size: 14px;
        color: var(--text-primary);
        font-weight: 500;
        max-width: 150px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .user-credits {
        font-size: 12px;
        color: var(--text-secondary);
      }

      .user-credits.has-credits {
        color: var(--secondary);
        font-weight: 600;
      }

      .btn-signout {
        padding: 0.5rem 1rem;
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        color: var(--text-secondary);
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
      }

      .btn-signout:hover {
        background: rgba(237, 66, 69, 0.1);
        border-color: rgba(237, 66, 69, 0.3);
        color: var(--danger);
      }

      .user-separator {
        color: var(--text-secondary);
        font-size: 12px;
        opacity: 0.6;
      }

      .user-plan {
        flex-shrink: 0;
        padding: 2px 8px;
        background: rgba(88, 101, 242, 0.15);
        border: 1px solid rgba(88, 101, 242, 0.3);
        border-radius: 10px;
        font-size: 11px;
        font-weight: 600;
        color: var(--primary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .user-plan.credits {
        background: rgba(87, 242, 135, 0.15);
        border-color: rgba(87, 242, 135, 0.3);
        color: var(--secondary);
      }

      .user-plan.free {
        background: rgba(88, 101, 242, 0.15);
        border-color: rgba(88, 101, 242, 0.3);
        color: var(--primary);
      }

      /* When daily limit is exhausted */
      .user-plan.exhausted {
        background: rgba(254, 231, 92, 0.15);
        border-color: rgba(254, 231, 92, 0.3);
        color: var(--warning);
      }

      @media (min-width: 769px) {
        .user-plan {
          min-width: fit-content;
          white-space: nowrap;
        }
      }

      /* On mobile, show shortened version */
      @media (max-width: 768px) {
        .user-menu {
          gap: 0.5rem;
        }

        .user-display {
          padding: 0.4rem 0.75rem;
        }

        .user-avatar {
          width: 28px;
          height: 28px;
          font-size: 11px;
        }

        .user-email {
          max-width: 100px;
          font-size: 13px;
        }

        .user-credits {
          font-size: 11px;
        }

        .btn-signout {
          padding: 0.4rem 0.75rem;
          font-size: 13px;
        }

        /* Hide the word "CREDITS" or "FREE" on very small screens */
        .user-plan.credits::after {
          content: " CR";
        }

        .user-plan.free::after {
          content: " FREE";
        }

        /* Only show the number */
        @media (max-width: 480px) {
          .user-plan {
            /* This will show just "100" instead of "100 CREDITS" */
            font-size: 0.9rem;
          }
          .user-menu {
            flex-direction: column;
            align-items: stretch;
            width: 100%;
          }

          .user-display {
            justify-content: center;
          }

          .btn-signout {
            width: 100%;
          }
        }
      }

      .user-plan.pro {
        background: rgba(87, 242, 135, 0.15);
        border-color: rgba(87, 242, 135, 0.3);
        color: var(--secondary);
      }

      /* Caret icon */
      .user-caret {
        flex-shrink: 0;
        width: 16px;
        height: 16px;
        color: var(--text-secondary);
        transition: transform 0.2s ease;
      }

      .user-button.active .user-caret {
        transform: rotate(180deg);
      }

      /* Enhanced Dropdown */
      .user-dropdown {
        display: none;
        position: absolute;
        top: calc(100% + 8px);
        right: 0;
        width: 280px;
        background: rgba(44, 47, 51, 0.98);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(20px);
        overflow: hidden;
        animation: dropdownSlide 0.2s ease;
      }

      .user-dropdown.active {
        display: block;
      }

      @keyframes dropdownSlide {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .dropdown-header {
        padding: 16px;
        background: rgba(26, 27, 38, 0.4);
      }

      .dropdown-email {
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 4px;
        word-break: break-all;
      }

      .dropdown-plan {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 13px;
        color: var(--text-secondary);
      }

      .dropdown-credits {
        padding: 2px 6px;
        background: rgba(88, 101, 242, 0.1);
        border-radius: 4px;
        font-size: 11px;
        color: var(--primary);
      }

      .dropdown-divider {
        height: 1px;
        background: rgba(255, 255, 255, 0.08);
      }

      .dropdown-menu {
        list-style: none;
        padding: 4px 0;
        margin: 0;
      }

      .dropdown-menu li a {
        display: flex;
        align-items: center;
        padding: 10px 16px;
        color: var(--text-primary);
        text-decoration: none;
        font-size: 14px;
        transition: all 0.15s ease;
      }

      .dropdown-menu li a:hover {
        background: rgba(88, 101, 242, 0.1);
        color: var(--primary);
        padding-left: 20px;
      }

      .dropdown-signout {
        width: 100%;
        padding: 12px 16px;
        background: none;
        border: none;
        color: var(--danger);
        text-align: left;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.15s ease;
      }

      .dropdown-signout:hover {
        background: rgba(237, 66, 69, 0.1);
        padding-left: 20px;
      }

      /* Mobile responsive adjustments */
      @media (max-width: 768px) {
        .user-button {
          max-width: 200px;
          height: 36px;
          padding: 0 10px 0 4px;
        }

        .user-avatar {
          width: 26px;
          height: 26px;
          font-size: 10px;
        }

        .user-email {
          max-width: 100px;
          font-size: 13px;
        }

        .user-separator {
          display: none;
        }

        .user-plan {
          display: none; /* Hide on mobile to save space */
        }

        .user-dropdown {
          width: 260px;
          right: -10px;
        }
      }

      @media (max-width: 480px) {
        .user-button {
          max-width: 160px;
        }

        .user-email {
          max-width: 80px;
        }
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.5rem 1rem;
        background: transparent;
        border: 1px solid var(--border);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .user-info-text {
        display: flex;
        flex-direction: column;
        min-width: 0;
      }

      .user-info:hover {
        background: var(--bg-card);
        border-color: var(--primary);
      }

      .user-info::after {
        content: "▾";
        font-size: 12px;
        color: var(--text-secondary);
        transition: transform 0.2s;
      }

      .user-info.active::after {
        transform: rotate(180deg);
      }

      .modal-content .alert {
        margin-top: 1rem;
        margin-bottom: 0;
      }

      .modal-content .alert.active {
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Improve modal form styling */
      .modal-content form {
        margin-top: 1rem;
      }

      .modal-content input:focus {
        box-shadow: 0 0 0 2px rgba(88, 101, 242, 0.2);
      }

      /* Success state for inputs */
      .modal-content .alert-success.active {
        background: rgba(87, 242, 135, 0.15);
        border-color: var(--secondary);
        color: var(--secondary);
      }

      .user-dropdown {
        display: none;
        position: absolute;
        top: 100%;
        right: 0;
        margin-top: 0.75rem;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 8px;
        min-width: 180px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        overflow: hidden;
      }

      .user-dropdown.active {
        display: block;
      }

      .user-dropdown a,
      .user-dropdown button {
        display: block;
        width: 100%;
        padding: 0.875rem 1.25rem;
        text-align: left;
        background: none;
        border: none;
        color: var(--text-primary);
        text-decoration: none;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
      }

      .user-dropdown a:hover,
      .user-dropdown button:hover {
        background: rgba(88, 101, 242, 0.1);
        color: var(--primary);
        padding-left: 1.5rem;
      }

      /* Container */
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 8rem 2rem 3rem;
      }

      /* Hero Section */
      .hero {
        text-align: center;
        margin-bottom: 2rem;
        padding: 2rem 0 !important; /* override top/bottom spacing */
        min-height: auto !important; /* kill any forced tall height */
      }
      .product-icon {
        width: 64px;
        height: 64px;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        border-radius: 16px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 2rem;
      }

      .hero h1 {
        font-size: 3rem;
        font-weight: 800;
        margin-bottom: 1rem;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--secondary) 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .hero p {
        font-size: 1.25rem;
        color: var(--text-secondary);
        margin-bottom: 1rem;
      }

      .trust-badges {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-top: 1.5rem;
        flex-wrap: wrap;
      }

      .trust-badge {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .trust-badge .icon {
        color: var(--secondary);
        font-size: 1.2rem;
      }

      /* Industry Impact Section */
      .industry-impact {
        margin: 3rem 0;
        text-align: center;
      }

      .industry-impact h2 {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 1rem;
      }

      .industry-impact p {
        color: var(--text-secondary);
        font-size: 1.1rem;
        margin-bottom: 2rem;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      .impact-stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .impact-stat-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        text-align: center;
      }

      .impact-stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      }

      .impact-stat-number {
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--primary);
        margin-bottom: 0.5rem;
        display: block;
      }

      .impact-stat-label {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.75rem;
      }

      .impact-stat-description {
        color: var(--text-secondary);
        font-size: 0.9rem;
        line-height: 1.5;
        margin-bottom: 1rem;
      }

      .impact-stat-source {
        font-size: 0.8rem;
        color: var(--text-secondary);
        font-style: italic;
        opacity: 0.8;
      }

      /* Comprehensive How It Works Guide */
      .comprehensive-guide {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 2rem;
        margin: 2rem 0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }

      .comprehensive-guide h2 {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 1.5rem;
        text-align: center;
      }

      .guide-step {
        margin-bottom: 2rem;
        border: 1px solid var(--border);
        border-radius: 12px;
        overflow: hidden;
        background: var(--bg-secondary);
      }

      .guide-step summary {
        cursor: pointer;
        padding: 1.5rem;
        background: var(--bg-secondary);
        font-weight: 600;
        font-size: 1.2rem;
        color: var(--text-primary);
        border: none;
        outline: none;
        position: relative;
        transition: background-color 0.2s ease;
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .guide-step summary:hover {
        background: var(--bg-hover);
      }

      .guide-step summary::marker {
        display: none;
      }

      .guide-step summary::before {
        content: "▶";
        color: var(--primary);
        font-size: 1rem;
        transition: transform 0.2s ease;
        flex-shrink: 0;
      }

      .guide-step[open] summary::before {
        transform: rotate(90deg);
      }

      .guide-step[open] summary {
        border-bottom: 1px solid var(--border);
      }

      .step-icon {
        font-size: 1.5rem;
        flex-shrink: 0;
      }

      .step-content {
        padding: 1.5rem;
        color: var(--text-secondary);
        line-height: 1.6;
      }

      .step-content p {
        margin-bottom: 1rem;
      }

      .step-content ul {
        margin: 1rem 0;
        padding-left: 1.5rem;
      }

      .step-content li {
        margin-bottom: 0.5rem;
      }

      .confidence-score {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.9rem;
        margin: 0.5rem 0;
      }

      .confidence-high {
        background: #dcfce7;
        color: #166534;
        border: 1px solid #bbf7d0;
      }

      .confidence-medium {
        background: #fef3c7;
        color: #92400e;
        border: 1px solid #fde68a;
      }

      .confidence-low {
        background: #fee2e2;
        color: #991b1b;
        border: 1px solid #fecaca;
      }

      .sample-scenario {
        background: var(--bg-hover);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 1rem;
        margin: 1rem 0;
      }

      .sample-scenario h4 {
        color: var(--primary);
        margin-bottom: 0.5rem;
        font-size: 1rem;
      }

      .scenario-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--border);
      }

      .scenario-item:last-child {
        border-bottom: none;
      }

      .scenario-label {
        font-weight: 500;
        color: var(--text-primary);
      }

      .scenario-value {
        color: var(--text-secondary);
        font-family: monospace;
        background: var(--bg-secondary);
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-size: 0.9rem;
      }

      /* Educational Content Section */
      .educational-content {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 2rem;
        margin: 2rem 0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }

      .educational-content h2 {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 1.5rem;
        text-align: center;
      }

      .educational-content h3 {
        font-size: 1.4rem;
        font-weight: 600;
        color: var(--primary);
        margin-bottom: 1rem;
        margin-top: 2rem;
      }

      .educational-content h3:first-child {
        margin-top: 0;
      }

      .educational-content p {
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: 1rem;
        font-size: 1rem;
      }

      .educational-content .highlight-stat {
        background: linear-gradient(135deg, #fef3c7, #fde68a);
        border: 1px solid #f59e0b;
        border-radius: 8px;
        padding: 1rem;
        margin: 1rem 0;
        text-align: center;
        font-weight: 600;
        color: #92400e;
      }

      /* Main Upload Card */
      .upload-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 2.5rem;
        margin-bottom: 2rem;
        position: relative;
      }

      .free-badge {
        position: absolute;
        top: -12px;
        right: 2rem;
        background: var(--secondary);
        color: var(--bg-dark);
        padding: 0.25rem 1rem;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.85rem;
      }

      /* Upload Area */
      .upload-area {
        background: var(--bg-dark);
        border: 2px dashed var(--border);
        border-radius: 12px;
        padding: 3rem;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .upload-area:hover {
        border-color: var(--primary);
        background: rgba(88, 101, 242, 0.05);
      }

      .upload-area.dragging {
        border-color: var(--primary);
        background: rgba(88, 101, 242, 0.1);
        transform: scale(1.02);
      }

      .upload-icon {
        width: 64px;
        height: 64px;
        margin: 0 auto 1rem;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.75rem;
      }

      input[type="file"] {
        display: none;
      }

      /* Buttons */
      .btn {
        padding: 0.75rem 2rem;
        border-radius: 8px;
        border: none;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: white;
      }

      .btn-primary:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(88, 101, 242, 0.3);
      }

      .btn-primary:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .btn-ghost {
        background: transparent;
        color: var(--text-primary);
        border: 1px solid var(--border);
      }

      .btn-ghost:hover {
        background: var(--bg-card);
      }

      .btn-block {
        width: 100%;
        text-align: center;
        justify-content: center;
      }

      /* Auth buttons container */
      #authButtons {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      #authButtons .btn {
        text-align: center;
        justify-content: center;
      }

      /* Best Practices Guide */
      .best-practices-guide {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 2rem;
        margin: 2rem 0;
      }

      .best-practices-toggle {
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 8px;
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin: 0 auto;
      }

      .best-practices-toggle:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }

      .best-practices-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.5s ease;
      }

      .best-practices-guide.expanded .best-practices-content {
        max-height: 2000px;
      }

      .best-practices-guide.expanded .best-practices-toggle .toggle-icon {
        transform: rotate(180deg);
      }

      .toggle-icon {
        transition: transform 0.3s ease;
      }

      .best-practices-sections {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
      }

      .best-practices-section {
        background: var(--dark);
        border-radius: 12px;
        padding: 1.5rem;
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
      }

      .best-practices-section:hover {
        border-color: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      .best-practices-section h3 {
        color: var(--primary);
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .best-practices-section p {
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: 1rem;
      }

      .best-practices-section ul {
        color: var(--text-secondary);
        padding-left: 1.5rem;
        margin-bottom: 1rem;
      }

      .best-practices-section li {
        margin-bottom: 0.5rem;
        line-height: 1.5;
      }

      .best-practices-section li strong {
        color: var(--text-primary);
      }

      /* Results Section */
      .results-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 2.5rem;
        display: none;
        margin-bottom: 2rem;
      }

      .results-card.active {
        display: block;
        animation: fadeInUp 0.5s ease;
      }

      /* Summary Stats */
      .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .stat-card {
        background: var(--bg-dark);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 1.5rem;
        text-align: center;
      }

      .stat-value {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 0.25rem;
      }

      .stat-label {
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .stat-card.highlight .stat-value {
        color: var(--secondary);
      }

      /* Alert Messages */
      .alert {
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 1rem;
        display: none;
      }

      .alert.active {
        display: block;
      }

      .alert-error {
        background: rgba(237, 66, 69, 0.1);
        border: 1px solid rgba(237, 66, 69, 0.3);
        color: var(--danger);
      }

      .alert-warning {
        background: rgba(254, 231, 92, 0.1);
        border: 1px solid rgba(254, 231, 92, 0.3);
        color: var(--warning);
      }

      .alert-success {
        background: rgba(87, 242, 135, 0.1);
        border: 1px solid rgba(87, 242, 135, 0.3);
        color: var(--secondary);
      }

      /* Common Scenarios Section */
      .scenarios-section {
        margin: 4rem 0;
      }

      .scenarios-header {
        text-align: center;
        margin-bottom: 3rem;
      }

      .scenarios-header h2 {
        font-size: 2rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 1rem;
      }

      .scenarios-header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
        max-width: 600px;
        margin: 0 auto;
      }

      .scenarios-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
      }

      .scenario-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 2rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .scenario-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      }

      .scenario-card h3 {
        font-size: 1.3rem;
        font-weight: 600;
        color: var(--primary);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .scenario-card .scenario-icon {
        font-size: 1.5rem;
        flex-shrink: 0;
      }

      .scenario-card .scenario-description {
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: 1.5rem;
        font-size: 1rem;
      }

      .scenario-card .dupecheck-solution {
        background: var(--bg-secondary);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 1rem;
        margin-top: 1rem;
      }

      .scenario-card .dupecheck-solution h4 {
        color: var(--success);
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .scenario-card .dupecheck-solution .solution-icon {
        font-size: 1.2rem;
      }

      .scenario-card .dupecheck-solution p {
        color: var(--text-secondary);
        margin: 0;
        font-size: 0.95rem;
        line-height: 1.5;
      }

      .scenario-example {
        background: var(--bg-hover);
        border: 1px solid var(--border);
        border-radius: 6px;
        padding: 0.75rem;
        margin: 1rem 0;
        font-family: monospace;
        font-size: 0.9rem;
        color: var(--text-secondary);
      }

      .scenario-example .example-label {
        color: var(--text-primary);
        font-weight: 500;
        margin-bottom: 0.25rem;
        display: block;
      }

      /* Pricing Section */
      .pricing-section {
        margin: 4rem 0;
      }

      .pricing-header {
        text-align: center;
        margin-bottom: 3rem;
      }

      .pricing-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 2rem;
        max-width: 1200px;
        margin: 0 auto;
        margin-bottom: 48px;
      }

      .pricing-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 2rem;
        text-align: center;
        position: relative;
        transition: transform 0.3s ease;
        display: flex;
        flex-direction: column;
      }

      .pricing-card .btn-block {
        margin-top: auto;
      }

      .pricing-card:hover {
        transform: translateY(-4px);
      }

      .pricing-card.featured {
        border-color: var(--primary);
        border-width: 2px;
        transform: scale(1.05);
      }

      .pricing-card.featured:hover {
        transform: scale(1.05) translateY(-4px);
      }

      .pricing-card .badge {
        position: absolute;
        top: -12px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--primary);
        color: white;
        padding: 0.25rem 1rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
      }

      /* Security & Compliance Section */
      .security-section {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 3rem 2rem;
        margin: 3rem 0;
        position: relative;
        overflow: visible;
      }

      .security-header {
        text-align: center;
        margin-bottom: 3rem;
      }

      .security-header h2 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: var(--text-primary);
      }

      .security-header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
        max-width: 600px;
        margin: 0 auto;
        line-height: 1.6;
      }

      .security-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
      }

      .security-item {
        background: var(--dark);
        border-radius: 12px;
        padding: 2rem;
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
        text-align: center;
      }

      .security-item:hover {
        border-color: var(--primary);
        transform: translateY(-4px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      .security-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        display: block;
      }

      .security-item h3 {
        color: var(--text-primary);
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 1rem;
      }

      .security-item p {
        color: var(--text-secondary);
        line-height: 1.6;
        margin: 0;
      }

      .users-section {
        background: var(--dark);
        border-radius: 12px;
        padding: 2rem;
        margin-top: 2rem;
        border: 1px solid var(--border-color);
        text-align: center;
      }

      .users-section h3 {
        color: var(--primary);
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
      }

      .users-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }

      .user-type {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        padding: 1rem;
        color: var(--text-secondary);
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .user-type:hover {
        background: rgba(255, 255, 255, 0.1);
        color: var(--text-primary);
      }

      /* Educational Content */
      .educational-content {
        background: var(--dark);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 1.5rem;
        margin: 1.5rem 0;
      }

      .educational-content h4 {
        color: var(--primary);
        font-size: 1.1rem;
        font-weight: 700;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .educational-content p {
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: 1rem;
      }

      .educational-content ul {
        color: var(--text-secondary);
        padding-left: 1.5rem;
        margin-bottom: 1rem;
      }

      .educational-content li {
        margin-bottom: 0.5rem;
        line-height: 1.5;
      }

      .educational-content li strong {
        color: var(--text-primary);
      }

      .learn-more-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--primary);
        text-decoration: none;
        font-weight: 600;
        padding: 0.5rem 1rem;
        border: 1px solid var(--primary);
        border-radius: 6px;
        transition: all 0.3s ease;
        margin-top: 1rem;
      }

      .learn-more-link:hover {
        background: var(--primary);
        color: white;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      .educational-content.duplicates-found {
        border-color: var(--warning);
        background: rgba(255, 193, 7, 0.05);
      }

      .educational-content.duplicates-found h4 {
        color: var(--warning);
      }

      .educational-content.no-duplicates {
        border-color: var(--success);
        background: rgba(16, 185, 129, 0.05);
      }

      .educational-content.no-duplicates h4 {
        color: var(--success);
      }

      .price {
        font-size: 3rem;
        font-weight: 700;
        margin: 1rem 0;
      }

      .price .currency {
        font-size: 1.5rem;
        color: var(--text-secondary);
      }

      .price .period {
        font-size: 1rem;
        color: var(--text-secondary);
      }

      .features-list {
        list-style: none;
        margin: 2rem 0;
        text-align: left;
        flex-grow: 1;
      }

      .features-list li {
        padding: 0.5rem 0;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--text-secondary);
      }

      .features-list .check {
        color: var(--secondary);
      }

      /* FAQ Section */
      .faq-section {
        background: var(--bg-card);
        border-radius: 16px;
        padding: 3rem 2rem;
        margin: 3rem 0;
        border: 1px solid var(--border-color);
      }

      .faq-section h2 {
        font-size: 2.5rem;
        font-weight: 700;
        text-align: center;
        margin-bottom: 1rem;
        color: var(--text-primary);
      }

      .faq-section p {
        text-align: center;
        color: var(--text-secondary);
        font-size: 1.1rem;
        margin-bottom: 3rem;
      }

      .faq-accordion {
        max-width: 800px;
        margin: 0 auto;
      }

      .faq-item {
        background: var(--dark);
        border-radius: 12px;
        margin-bottom: 1rem;
        border: 1px solid var(--border-color);
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .faq-item:hover {
        border-color: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      .faq-question {
        padding: 1.5rem 2rem;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: transparent;
        border: none;
        width: 100%;
        text-align: left;
        color: var(--text-primary);
        font-size: 1.1rem;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .faq-question:hover {
        color: var(--primary);
      }

      .faq-icon {
        font-size: 1.5rem;
        transition: transform 0.3s ease;
        color: var(--primary);
      }

      .faq-item.active .faq-icon {
        transform: rotate(180deg);
      }

      .faq-answer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease, padding 0.3s ease;
        background: rgba(0, 0, 0, 0.2);
      }

      .faq-item.active .faq-answer {
        max-height: 500px;
        padding: 0 2rem 1.5rem;
      }

      .faq-answer p {
        text-align: left;
        color: var(--text-secondary);
        font-size: 1rem;
        line-height: 1.6;
        margin: 0;
        padding-top: 1rem;
      }

      /* Footer */
      .footer {
        background: var(--dark);
        color: white;
        padding: 60px 0 20px;
        margin-top: 100px;
      }

      .footer-content {
        display: grid;
        grid-template-columns: 2fr 3fr;
        gap: 60px;
        margin-bottom: 40px;
      }

      .footer-brand {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 12px;
      }

      .footer-brand p {
        color: #9ca3af;
        margin: 12px 0;
        font-size: 16px;
      }

      .footer-powered {
        margin-top: 20px;
        font-size: 14px;
      }

      .footer-links {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 40px;
      }

      .footer-column h4 {
        font-size: 14px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 16px;
        color: white;
      }

      .footer-column a {
        display: block;
        color: #9ca3af;
        text-decoration: none;
        margin-bottom: 12px;
        transition: color 0.3s;
        font-size: 15px;
      }

      .footer-column a:hover {
        color: white;
      }

      .footer-bottom {
        padding-top: 32px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .footer-bottom p {
        color: #6b7280;
        font-size: 14px;
        margin: 0;
      }

      .footer-note {
        font-size: 12px;
        opacity: 0.7;
      }

      /* Free tier banner */
      .free-tier-banner {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 1.5rem;
        text-align: center;
        margin-bottom: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
      }

      .free-tier-banner .icon {
        color: var(--secondary);
        font-size: 1.5rem;
      }

      .free-tier-banner h3 {
        margin: 0;
        font-size: 1.1rem;
        color: var(--text-primary);
      }

      .free-tier-banner p {
        margin: 0;
        color: var(--text-secondary);
      }

      /* Custom Modal System */
      .custom-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.85);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.2s ease;
      }

      .custom-modal.active {
        display: flex;
      }

      .custom-modal-content {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 24px;
        width: 90%;
        max-width: 420px;
        position: relative;
        animation: slideUp 0.3s ease;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      }

      .custom-modal-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 16px;
      }

      .custom-modal-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        flex-shrink: 0;
      }

      .custom-modal-icon.error {
        background: rgba(239, 68, 68, 0.15);
        color: var(--danger);
      }

      .custom-modal-icon.info {
        background: rgba(88, 101, 242, 0.15);
        color: var(--primary);
      }

      .custom-modal-icon.success {
        background: rgba(87, 242, 135, 0.15);
        color: var(--secondary);
      }

      .custom-modal-icon.warning {
        background: rgba(254, 231, 92, 0.15);
        color: var(--warning);
      }

      .custom-modal-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--text-primary);
        margin: 0;
      }

      .custom-modal-message {
        color: var(--text-secondary);
        line-height: 1.5;
        margin-bottom: 20px;
        font-size: 15px;
      }

      .custom-modal-footer {
        display: flex;
        gap: 12px;
        justify-content: flex-end;
      }

      .custom-modal-btn {
        padding: 10px 20px;
        border-radius: 8px;
        border: none;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        min-width: 80px;
      }

      .custom-modal-btn-primary {
        background: var(--primary);
        color: white;
      }

      .custom-modal-btn-primary:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
      }

      .custom-modal-btn-secondary {
        background: transparent;
        color: var(--text-secondary);
        border: 1px solid var(--border);
      }

      .custom-modal-btn-secondary:hover {
        background: var(--bg-dark);
        color: var(--text-primary);
      }

      /* Confidence Score Tooltip */
      .confidence-tooltip {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 10000;
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.2s ease;
      }

      .confidence-tooltip.active {
        display: flex;
      }

      .confidence-tooltip-content {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 1.5rem;
        max-width: 600px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      }

      .confidence-tooltip-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
      }

      .confidence-tooltip-header h3 {
        margin: 0;
        color: var(--text-primary);
        font-size: 1.25rem;
      }

      .confidence-tooltip-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--text-secondary);
        cursor: pointer;
        padding: 0;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: background-color 0.2s;
      }

      .confidence-tooltip-close:hover {
        background: var(--bg-dark);
        color: var(--text-primary);
      }

      .confidence-tooltip-body {
        color: var(--text-secondary);
        line-height: 1.6;
      }

      .confidence-tooltip-body p {
        margin: 0 0 1rem 0;
      }

      .confidence-tooltip-body ul {
        margin: 0 0 1rem 1rem;
        padding: 0;
      }

      .confidence-tooltip-body li {
        margin-bottom: 0.5rem;
      }

      .confidence-levels {
        margin: 1rem 0;
      }

      .confidence-level {
        display: flex;
        align-items: center;
        margin-bottom: 0.75rem;
        gap: 0.75rem;
      }

      .confidence-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-weight: 600;
        font-size: 0.85rem;
        min-width: 60px;
        text-align: center;
        flex-shrink: 0;
      }

      .confidence-badge.high {
        background: rgba(87, 242, 135, 0.2);
        color: #57f287;
      }

      .confidence-badge.medium {
        background: rgba(254, 231, 92, 0.2);
        color: #fee75c;
      }

      .confidence-badge.low {
        background: rgba(239, 68, 68, 0.2);
        color: #ed4245;
      }

      .confidence-example {
        background: var(--bg-dark);
        padding: 1rem;
        border-radius: 8px;
        border-left: 4px solid var(--primary);
        margin: 1rem 0 0 0;
        font-style: italic;
      }

      .confidence-help-icon {
        display: inline-block;
        width: 16px;
        height: 16px;
        background: var(--primary);
        color: white;
        border-radius: 50%;
        font-size: 12px;
        font-weight: bold;
        text-align: center;
        line-height: 16px;
        cursor: pointer;
        margin-left: 4px;
        vertical-align: middle;
        transition: background-color 0.2s;
      }

      .confidence-help-icon:hover {
        background: var(--primary-dark);
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Loading */
      .loading-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(26, 27, 38, 0.95);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }

      .loading-overlay.active {
        display: flex;
      }

      .spinner {
        width: 60px;
        height: 60px;
        border: 4px solid var(--border);
        border-top-color: var(--primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .nav-links a {
        color: var(--text-primary);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s;
        font-size: 16px;
        padding: 0;
      }

      .nav-links a:hover {
        color: var(--primary);
      }

      /* Tools Dropdown */
      .dropdown {
        position: relative;
        display: inline-block;
      }

      .dropdown-btn {
        background: none;
        border: none;
        color: var(--text-primary);
        text-decoration: none;
        font-weight: 500;
        font-size: 16px;
        cursor: pointer;
        transition: color 0.3s;
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .dropdown-btn:hover {
        color: var(--primary);
      }

      .dropdown-content {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        background: #1f2937;
        color: white;
        width: 224px;
        border-radius: 8px;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3),
          0 4px 6px -2px rgba(0, 0, 0, 0.2);
        padding: 8px 0;
        z-index: 1000;
        opacity: 0;
        transform: translateY(-10px);
        transition: opacity 0.2s ease, transform 0.2s ease;
      }

      .dropdown.active .dropdown-content {
        display: block;
        opacity: 1;
        transform: translateY(0);
      }

      .dropdown-section {
        margin-bottom: 8px;
      }

      .dropdown-section:last-child {
        margin-bottom: 0;
      }

      .dropdown-section-title {
        padding: 4px 12px;
        font-size: 12px;
        color: #9ca3af;
        text-transform: uppercase;
        font-weight: 500;
        letter-spacing: 0.5px;
      }

      .dropdown-section a {
        display: flex;
        align-items: center;
        padding: 8px 12px;
        color: white;
        text-decoration: none;
        font-size: 14px;
        transition: background-color 0.2s ease;
        border-radius: 6px;
        margin: 2px 8px;
      }

      .dropdown-section a:hover {
        background-color: #374151;
        transition: background-color 0.2s ease;
      }

      .dropdown-divider {
        border-top: 1px solid #374151;
        margin: 8px 0;
      }

      /* ============================================
   MOBILE RESPONSIVE FIXES
   ============================================ */

      /* Mobile Navigation Fixes */
      @media (max-width: 768px) {
        /* Navigation container */
        nav {
          padding: 0.75rem 1rem;
        }

        .nav-container {
          flex-wrap: wrap;
          gap: 0.75rem;
        }

        .nav-left {
          flex: 1;
          min-width: 150px;
        }

        .nav-links {
          flex-wrap: wrap;
          justify-content: flex-end;
          gap: 0.5rem;
          width: 100%;
          order: 3;
          margin-top: 0.5rem;
        }

        /* Logo sizing */
        .logo svg {
          width: 150px;
          height: 50px;
        }

        /* Usage counter - make it more compact */
        .usage-counter {
          font-size: 0.8rem;
          padding: 0.4rem 0.8rem;
          max-width: 100%;
          text-align: center;
        }

        .usage-counter .count {
          font-size: 0.9rem;
        }

        /* Auth buttons */
        #authButtons {
          display: flex;
          gap: 0.5rem !important;
        }

        #authButtons .btn {
          padding: 0.5rem 1rem;
          font-size: 0.9rem;
        }

        /* User menu */
        .user-info {
          padding: 0.4rem 0.8rem;
          font-size: 0.9rem;
        }

        .user-dropdown {
          right: -10px;
          min-width: 160px;
          position: fixed;
          right: 1rem;
          left: 1rem;
          width: auto;
          max-width: 300px;
          margin: 0 auto;
        }

        /* Container padding adjustment */
        .container {
          padding: 7rem 1rem 2rem;
        }

        /* Hero Section */
        .hero h1 {
          font-size: 1.75rem;
          line-height: 1.2;
          margin-bottom: 0.75rem;
        }

        .hero p {
          font-size: 1rem;
          padding: 0 1rem;
        }

        .product-icon {
          width: 48px;
          height: 48px;
          font-size: 1.5rem;
        }

        /* Trust badges */
        .trust-badges {
          gap: 1rem;
          padding: 0 1rem;
        }

        .trust-badge {
          font-size: 0.8rem;
          flex: 1 1 100%;
          justify-content: center;
        }

        /* Industry Impact */
        .industry-impact {
          margin: 2rem 0;
        }

        .industry-impact h2 {
          font-size: 1.5rem;
        }

        .industry-impact p {
          font-size: 1rem;
          padding: 0 1rem;
        }

        .impact-stats-grid {
          grid-template-columns: 1fr !important;
          gap: 1rem;
          padding: 0 1rem;
        }

        .impact-stat-card {
          padding: 1.25rem;
        }

        .impact-stat-number {
          font-size: 2rem;
        }

        /* How it works section */
        .hero > div:last-child > div {
          grid-template-columns: 1fr !important;
          gap: 1.5rem !important;
          padding: 0 1rem;
        }

        /* Comprehensive Guide */
        .comprehensive-guide {
          padding: 1.5rem 1rem;
          margin: 1.5rem 0.5rem;
        }

        .comprehensive-guide h2 {
          font-size: 1.5rem;
        }

        .guide-step summary {
          padding: 1rem;
          font-size: 1.1rem;
        }

        .step-content {
          padding: 1rem;
        }

        .scenario-item {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.25rem;
        }

        /* Educational Content */
        .educational-content {
          padding: 1.5rem 1rem;
          margin: 1.5rem 0.5rem;
        }

        .educational-content h2 {
          font-size: 1.5rem;
        }

        .educational-content h3 {
          font-size: 1.2rem;
        }

        /* Upload Card */
        .upload-card {
          padding: 1.5rem 1rem;
          margin: 0 0.5rem 1.5rem;
        }

        .free-badge {
          right: 1rem;
          font-size: 0.75rem;
          padding: 0.2rem 0.8rem;
        }

        .upload-area {
          padding: 2rem 1rem;
        }

        .upload-area h3 {
          font-size: 1.1rem;
        }

        .upload-area p {
          font-size: 0.9rem;
        }

        /* Best Practices Guide */
        .best-practices-guide {
          padding: 1.5rem 1rem;
          margin: 1.5rem 0.5rem;
        }

        .best-practices-sections {
          grid-template-columns: 1fr;
          gap: 1.5rem;
        }

        .best-practices-section {
          padding: 1rem;
        }

        .best-practices-toggle {
          padding: 0.6rem 1.2rem;
          font-size: 0.9rem;
        }

        /* Results Card */
        .results-card {
          padding: 1.5rem 1rem;
          margin: 0 0.5rem 1.5rem;
        }

        .summary-grid {
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        .stat-card {
          padding: 1rem;
        }

        .stat-value {
          font-size: 1.5rem;
        }

        /* Download buttons */
        .results-card > div:last-child {
          flex-direction: column;
        }

        .results-card .btn {
          width: 100%;
          min-width: unset !important;
        }

        /* Scenarios Section */
        .scenarios-section {
          margin: 2rem 0;
        }

        .scenarios-header h2 {
          font-size: 1.5rem;
        }

        .scenarios-grid {
          grid-template-columns: 1fr !important;
          gap: 1.5rem;
          padding: 0 0.5rem;
        }

        .scenario-card {
          padding: 1.5rem;
        }

        .scenario-card h3 {
          font-size: 1.2rem;
        }

        /* Pricing Section */
        .pricing-section {
          margin: 2rem 0;
        }

        .pricing-header h2 {
          font-size: 1.5rem;
        }

        .pricing-grid {
          grid-template-columns: 1fr !important;
          gap: 1.5rem;
          padding: 0 0.5rem;
        }

        .pricing-card {
          padding: 1.5rem;
        }

        .pricing-card.featured {
          transform: scale(1) !important;
        }

        /* Security Section */
        .security-section {
          padding: 2rem 1rem;
          margin: 2rem 0;
        }

        .security-header h2 {
          font-size: 2rem;
        }

        .security-grid {
          grid-template-columns: 1fr;
          gap: 1.5rem;
        }

        .security-item {
          padding: 1.5rem;
        }

        .security-icon {
          font-size: 2.5rem;
        }

        .users-list {
          grid-template-columns: 1fr;
          gap: 0.75rem;
        }

        .price {
          font-size: 2rem;
        }

        .features-list {
          font-size: 0.9rem;
        }

        /* Free tier banner */
        .free-tier-banner {
          flex-direction: column;
          text-align: center;
          padding: 1rem;
          margin: 0 0.5rem 1.5rem;
        }

        .free-tier-banner h3 {
          font-size: 0.95rem;
        }

        .free-tier-banner p {
          font-size: 0.85rem;
        }

        /* Modals */
        .modal-content {
          width: 95%;
          max-width: 95%;
          padding: 1.5rem;
          margin: 1rem;
        }

        .custom-modal-content {
          width: 95%;
          max-width: 95%;
          padding: 1.5rem;
          margin: 1rem;
        }

        .auth-tabs {
          gap: 0.5rem;
        }

        .auth-tab {
          font-size: 0.9rem;
          padding: 0.5rem 0.75rem;
        }

        /* Forms */
        .form-group input {
          font-size: 16px; /* Prevents zoom on iOS */
          padding: 0.6rem;
        }

        /* Buttons */
        .btn {
          padding: 0.6rem 1.5rem;
          font-size: 0.9rem;
        }

        /* FAQ Section */
        .faq-section {
          padding: 2rem 1rem;
          margin: 2rem 0;
        }

        .faq-section h2 {
          font-size: 2rem;
        }

        .faq-question {
          padding: 1rem 1.5rem;
          font-size: 1rem;
        }

        .faq-item.active .faq-answer {
          padding: 0 1.5rem 1rem;
        }

        /* Footer */
        .footer {
          padding: 40px 0 20px;
          margin-top: 60px;
        }

        .footer-content {
          grid-template-columns: 1fr;
          gap: 30px;
        }

        .footer-links {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .footer-bottom {
          flex-direction: column;
          text-align: center;
          gap: 1rem;
        }

        /* Loading overlay */
        .loading-overlay > div {
          padding: 0 1rem;
          max-width: 90%;
        }

        .spinner {
          width: 40px;
          height: 40px;
        }

        /* Alerts */
        .alert {
          font-size: 0.9rem;
          padding: 0.75rem;
        }

        /* Fix horizontal scrolling issues */
        body {
          overflow-x: hidden;
        }

        * {
          max-width: 100vw;
        }
      }

      /* Extra small devices (phones in portrait) */
      @media (max-width: 480px) {
        /* Even more compact navigation */
        .nav-container {
          padding: 0;
        }

        .logo svg {
          width: 120px;
          height: 40px;
        }

        /* Stack auth buttons vertically if needed */
        #authButtons {
          flex-direction: column;
          width: 100%;
        }

        #authButtons .btn {
          width: 100%;
          text-align: center;
          justify-content: center;
        }

        /* Hero adjustments */
        .hero h1 {
          font-size: 1.5rem;
        }

        .hero p {
          font-size: 0.9rem;
        }

        /* Make pricing cards more compact */
        .pricing-card {
          padding: 1.25rem;
        }

        .price {
          font-size: 1.75rem;
        }

        /* Modal adjustments */
        .modal-content {
          padding: 1.25rem;
        }

        .custom-modal-content {
          padding: 1.25rem;
        }
      }

      /* Landscape orientation fixes */
      @media (max-height: 600px) and (orientation: landscape) {
        nav {
          padding: 0.5rem 1rem;
        }

        .container {
          padding-top: 5rem;
        }

        .hero h1 {
          font-size: 1.5rem;
          margin-bottom: 0.5rem;
        }

        .upload-card {
          padding: 1rem;
        }

        .upload-area {
          padding: 1.5rem;
        }
      }

      /* Fix for iOS Safari viewport issues */
      @supports (-webkit-touch-callout: none) {
        /* iOS only styles */
        body {
          -webkit-text-size-adjust: 100%;
        }

        input[type="file"] {
          font-size: 16px;
        }
      }

      /* Beta Banner */
      .beta-banner {
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        color: white;
        text-align: center;
        padding: 8px 0;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 10000;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .beta-banner-content {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        font-size: 14px;
        font-weight: 600;
      }

      .beta-badge {
        background: rgba(255, 255, 255, 0.2);
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 700;
        letter-spacing: 0.5px;
      }

      .beta-text {
        font-size: 14px;
      }

      .beta-help-icon {
        margin-left: 8px;
        cursor: pointer;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
        transition: all 0.3s ease;
        position: relative;
      }

      .beta-help-icon:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }

      .beta-tooltip {
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: var(--dark);
        color: var(--text-primary);
        padding: 12px 16px;
        border-radius: 8px;
        font-size: 13px;
        line-height: 1.4;
        white-space: nowrap;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        border: 1px solid var(--border-color);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        z-index: 1000;
        margin-bottom: 8px;
        max-width: 280px;
        white-space: normal;
        text-align: left;
      }

      .beta-tooltip::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        border: 5px solid transparent;
        border-top-color: var(--dark);
      }

      .beta-tooltip.show {
        opacity: 1;
        visibility: visible;
      }

      /* Adjust body padding to account for beta banner */
      body {
        padding-top: 40px;
      }
    </style>

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "How accurate is the duplicate detection?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Our AI-powered system achieves a 95% accuracy rate in detecting duplicate invoices. This high accuracy comes from advanced machine learning algorithms that analyze multiple data points including vendor names, amounts, dates, and invoice descriptions. The system can identify both exact duplicates and subtle variations that human reviewers often miss. False positives are kept to a minimum through sophisticated confidence scoring, and you can always review flagged items before taking action. The 95% rate is based on extensive testing with thousands of real-world invoice datasets."
            }
          },
          {
            "@type": "Question",
            "name": "What file formats are supported?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "We support all major invoice file formats including PDF, Excel (.xlsx, .xls), CSV, and Word documents (.docx, .doc). Our system can extract text and data from scanned PDFs using advanced OCR technology, making it compatible with both digital and paper-based invoices. For bulk processing, CSV and Excel formats are recommended as they provide the cleanest data extraction. There's no file size limit for individual uploads, and you can process hundreds of invoices simultaneously. All processing happens securely in our cloud infrastructure."
            }
          },
          {
            "@type": "Question",
            "name": "How is my data protected?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Your data security is our top priority. All file uploads are encrypted using 256-bit SSL encryption during transmission and storage. We use enterprise-grade cloud infrastructure with SOC 2 Type II compliance. Your invoice data is automatically deleted immediately after processing - we never store your financial information long-term. Our servers are located in secure data centers with 24/7 monitoring and access controls. We don't share your data with third parties, and all processing is done in isolated, secure environments. Regular security audits ensure our systems meet the highest industry standards."
            }
          },
          {
            "@type": "Question",
            "name": "What's the difference between free and paid?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "The free version allows you to analyze up to 10 invoices per month with basic duplicate detection. It's perfect for small businesses or individuals testing the service. The paid plans offer unlimited invoice processing, advanced AI detection with higher accuracy rates, bulk file uploads, detailed reporting with export options, priority customer support, and API access for integration with existing accounting systems. Paid users also get confidence scoring explanations, custom detection rules, and faster processing times. Choose the plan that fits your volume and business needs."
            }
          },
          {
            "@type": "Question",
            "name": "Can it detect partial duplicates?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes, our system excels at detecting partial duplicates that traditional exact-matching tools miss. We can identify invoices where only portions are duplicated, such as when a vendor splits one service into multiple invoices or when the same purchase order generates several related invoices. The AI analyzes invoice line items, vendor information, amounts, and dates to find these complex patterns. This includes detecting cases where the same vendor submits multiple invoices for the same project with slightly different amounts or descriptions. Our fuzzy matching algorithms catch these subtle variations that represent 60% of all duplicate invoices."
            }
          }
        ]
      }
    </script>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "DupeCheck",
        "description": "AI-powered duplicate invoice detection tool that helps businesses identify and prevent duplicate payments. Upload your invoice files and get instant analysis with confidence scores and detailed reporting.",
        "url": "https://dupecheck.com",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web Browser",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD",
          "description": "Free tier available with paid plans starting at $5"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "ratingCount": "150",
          "bestRating": "5",
          "worstRating": "1"
        },
        "featureList": [
          "AI-powered duplicate detection",
          "95% accuracy rate",
          "Multiple file format support",
          "Confidence scoring",
          "Detailed reporting",
          "Data security and privacy",
          "Bulk processing",
          "API integration"
        ],
        "screenshot": "https://dupecheck.com/screenshot.png",
        "softwareVersion": "1.0.0",
        "releaseNotes": "Initial release with core duplicate detection functionality",
        "author": {
          "@type": "Organization",
          "name": "Forge APIs",
          "url": "https://forgeapis.com"
        }
      }
    </script>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "How to Detect Duplicate Invoices with AI",
        "description": "Learn how to use DupeCheck to identify duplicate invoices in your business and prevent unnecessary payments.",
        "image": "https://dupecheck.com/howto-image.png",
        "totalTime": "PT5M",
        "estimatedCost": {
          "@type": "MonetaryAmount",
          "currency": "USD",
          "value": "0"
        },
        "supply": [
          {
            "@type": "HowToSupply",
            "name": "Invoice files (PDF, Excel, CSV, Word)"
          },
          {
            "@type": "HowToSupply",
            "name": "Computer with web browser"
          }
        ],
        "tool": [
          {
            "@type": "HowToTool",
            "name": "DupeCheck AI Detection Tool"
          }
        ],
        "step": [
          {
            "@type": "HowToStep",
            "name": "Prepare Your Invoice Files",
            "text": "Gather your invoice files in supported formats (PDF, Excel, CSV, or Word). Ensure they contain vendor names, invoice numbers, amounts, and dates for best results.",
            "image": "https://dupecheck.com/step1.png"
          },
          {
            "@type": "HowToStep",
            "name": "Upload Files to DupeCheck",
            "text": "Visit DupeCheck and upload your invoice files using the drag-and-drop interface. You can upload multiple files at once for bulk processing.",
            "image": "https://dupecheck.com/step2.png"
          },
          {
            "@type": "HowToStep",
            "name": "Wait for AI Analysis",
            "text": "The AI system will analyze your invoices using advanced machine learning algorithms to identify potential duplicates. This typically takes 30-60 seconds.",
            "image": "https://dupecheck.com/step3.png"
          },
          {
            "@type": "HowToStep",
            "name": "Review Results and Confidence Scores",
            "text": "Examine the detected duplicates with confidence scores (90%+ = very likely, 70-89% = possible, 50-69% = review needed). Check the match reasons for each duplicate.",
            "image": "https://dupecheck.com/step4.png"
          },
          {
            "@type": "HowToStep",
            "name": "Investigate and Resolve Duplicates",
            "text": "Contact vendors to verify duplicates, cross-reference with your records, document your findings, and process refunds or credits as needed.",
            "image": "https://dupecheck.com/step5.png"
          },
          {
            "@type": "HowToStep",
            "name": "Download Reports",
            "text": "Download detailed PDF or text reports of your analysis for record-keeping and sharing with your accounting team.",
            "image": "https://dupecheck.com/step6.png"
          }
        ]
      }
    </script>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Forge APIs",
        "description": "Forge APIs is a technology company specializing in AI-powered business automation tools and APIs. We create innovative solutions to help businesses streamline operations and improve efficiency.",
        "url": "https://forgeapis.com",
        "logo": "https://forgeapis.com/logo.png",
        "contactPoint": {
          "@type": "ContactPoint",
          "telephone": "+1-555-0123",
          "contactType": "customer service",
          "email": "hello@forgeapis.com",
          "availableLanguage": "English"
        },
        "address": {
          "@type": "PostalAddress",
          "addressCountry": "US",
          "addressLocality": "San Francisco",
          "addressRegion": "CA"
        },
        "sameAs": [
          "https://twitter.com/forgeapis",
          "https://linkedin.com/company/forgeapis",
          "https://github.com/forgeapis"
        ],
        "foundingDate": "2023",
        "founder": {
          "@type": "Person",
          "name": "Forge APIs Team"
        },
        "knowsAbout": [
          "Artificial Intelligence",
          "Business Automation",
          "API Development",
          "Financial Technology",
          "Duplicate Detection",
          "Invoice Processing"
        ]
      }
    </script>

    <!-- Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-5YPCMTRSNN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-5YPCMTRSNN");
    </script>
    <!-- End Google Analytics -->
  </head>
  <body>
    <!-- Beta Banner -->
    <div class="beta-banner">
      <div class="beta-banner-content">
        <span class="beta-badge">BETA</span>
        <span class="beta-text"
          >Currently in beta - Full launch coming soon</span
        >
        <span
          class="beta-help-icon"
          onclick="toggleBetaTooltip()"
          onblur="hideBetaTooltip()"
        >
          ?
          <div class="beta-tooltip" id="betaTooltip">
            DupeCheck is in beta while we perfect our AI detection algorithms.
            All features are fully functional. Beta users get lifetime discounts
            when we launch!
          </div>
        </span>
      </div>
    </div>

    <!-- Navigation -->
    <nav>
      <div class="nav-container">
        <div class="nav-left">
          <a href="https://forgeapis.com" class="logo">
            <svg
              width="300"
              height="100"
              viewBox="0 0 240 80"
              xmlns="http://www.w3.org/2000/svg"
            >
              <!-- Logo SVG content (same as before) -->
              <g transform="translate(15, 15)">
                <path
                  d="M 15 35 L 12 40 L 48 40 L 45 35 Z"
                  fill="#1E293B"
                  stroke="#0066FF"
                  stroke-width="0.5"
                />
                <rect
                  x="18"
                  y="30"
                  width="24"
                  height="5"
                  fill="#334155"
                  rx="1"
                />
                <rect x="16" y="28" width="28" height="2" fill="#475569" />
                <line
                  x1="20"
                  y1="32"
                  x2="40"
                  y2="32"
                  stroke="#0066FF"
                  stroke-width="0.5"
                  opacity="0.6"
                />
                <line
                  x1="22"
                  y1="34"
                  x2="38"
                  y2="34"
                  stroke="#00D4AA"
                  stroke-width="0.5"
                  opacity="0.6"
                />
                <g transform="rotate(-30 30 25)">
                  <rect
                    x="28"
                    y="15"
                    width="4"
                    height="18"
                    fill="#0066FF"
                    rx="0.5"
                  />
                  <path d="M 25 12 L 35 12 L 36 16 L 24 16 Z" fill="#0052CC" />
                  <rect x="24" y="13" width="2" height="2" fill="#00D4AA" />
                  <rect x="34" y="13" width="2" height="2" fill="#00D4AA" />
                </g>
                <g transform="rotate(30 30 25)">
                  <rect
                    x="28"
                    y="15"
                    width="4"
                    height="18"
                    fill="#0066FF"
                    rx="0.5"
                  />
                  <path d="M 25 12 L 35 12 L 36 16 L 24 16 Z" fill="#0052CC" />
                  <rect x="24" y="13" width="2" height="2" fill="#00D4AA" />
                  <rect x="34" y="13" width="2" height="2" fill="#00D4AA" />
                </g>
                <path
                  d="M 28 10 L 30 5 L 31 8 L 33 3 L 33 10 L 31 8 L 29 11 Z"
                  fill="#FF6B35"
                  opacity="0.9"
                />
                <path
                  d="M 26 12 L 27 9 L 28 11 L 29 8 L 29 13 Z"
                  fill="#FFA500"
                  opacity="0.8"
                />
                <path
                  d="M 31 12 L 32 9 L 33 11 L 34 8 L 34 13 Z"
                  fill="#FFA500"
                  opacity="0.8"
                />
                <rect
                  x="12"
                  y="20"
                  width="2"
                  height="2"
                  fill="#00D4AA"
                  opacity="0.8"
                />
                <rect
                  x="46"
                  y="20"
                  width="2"
                  height="2"
                  fill="#00D4AA"
                  opacity="0.8"
                />
                <rect
                  x="10"
                  y="25"
                  width="1.5"
                  height="1.5"
                  fill="#FFD700"
                  opacity="0.7"
                />
                <rect
                  x="48"
                  y="25"
                  width="1.5"
                  height="1.5"
                  fill="#FFD700"
                  opacity="0.7"
                />
              </g>
              <text
                x="75"
                y="45"
                font-family="Inter, system-ui, -apple-system, sans-serif"
                font-size="28"
                font-weight="800"
                fill="#FFFFFF"
              >
                Forge
              </text>
              <text
                x="150"
                y="45"
                font-family="Inter, system-ui, -apple-system, sans-serif"
                font-size="28"
                font-weight="400"
                fill="#9CA3AF"
              >
                APIs
              </text>
              <text
                x="75"
                y="63"
                font-family="Inter, system-ui, -apple-system, sans-serif"
                font-size="9"
                fill="#9CA3AF"
                letter-spacing="0.5"
              >
                PRODUCTION-READY APIS
              </text>
            </svg>
          </a>
        </div>
        <div class="nav-links">
          <div class="usage-counter" id="usageCounter">
            <span class="count" id="checksRemaining">3</span>
            <span>free checks today</span>
          </div>
          <!-- Tools Dropdown -->
          <div class="dropdown" id="toolsDropdown">
            <button class="dropdown-btn" id="toolsDropdownBtn">
              Tools <span style="font-size: 12px">▼</span>
            </button>
            <div class="dropdown-content">
              <div class="dropdown-section">
                <div class="dropdown-section-title">Premium Tools</div>
                <a href="/riskscore/"> RiskScore API </a>
                <a href="/dupecheck/"> DupeCheck </a>
              </div>

              <div class="dropdown-divider"></div>

              <div class="dropdown-section">
                <div class="dropdown-section-title">Free Tools</div>
                <a href="/gst-calculator/"> GST Calculator </a>
                <a href="/gaming-calculators/"> Gaming Calculators </a>
                <a href="/va-calculator/"> VA Disability Calculator </a>
              </div>
            </div>
          </div>
          <div id="authButtons">
            <button class="btn btn-ghost" onclick="showAuthModal('login')">
              Login
            </button>
            <button class="btn btn-primary" onclick="showAuthModal('signup')">
              Sign Up
            </button>
          </div>
          <div id="userMenu" class="user-menu" style="display: none">
            <div class="user-display">
              <span class="user-avatar" id="userAvatar">TE</span>
              <div class="user-info-text">
                <span class="user-email" id="userEmail">test@example.com</span>
                <span class="user-credits" id="userCredits">3 free checks</span>
              </div>
            </div>
            <button class="btn-signout" onclick="logout()">Sign out</button>
          </div>

          <a href="#pricingSection">Pricing</a>
        </div>
      </div>
    </nav>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
      <div class="modal-content">
        <button class="modal-close" onclick="closeAuthModal()">×</button>
        <div class="auth-tabs">
          <button
            class="auth-tab active"
            id="loginTab"
            onclick="switchAuthTab('login')"
          >
            Login
          </button>
          <button
            class="auth-tab"
            id="signupTab"
            onclick="switchAuthTab('signup')"
          >
            Sign Up
          </button>
        </div>
        <form id="authForm" onsubmit="handleAuth(event)">
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required />
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input
              type="password"
              id="password"
              name="password"
              required
              minlength="6"
              placeholder="At least 6 characters"
            />
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%">
            <span id="authButtonText">Login</span>
          </button>
        </form>
        <div class="alert alert-error" id="authError"></div>
        <div class="alert alert-success" id="authSuccess"></div>
      </div>
    </div>

    <!-- Main Container -->
    <div class="container">
      <!-- Hero Section -->
      <div class="hero">
        <div
          style="
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 24px;
          "
        >
          <div class="product-icon">🔍</div>
          <span style="font-size: 36px; font-weight: 700; color: var(--primary)"
            >DupeCheck</span
          >
        </div>
        <h1>Catch Duplicate Invoices Instantly</h1>
        <div class="trust-badges">
          <div class="trust-badge">
            <span class="icon">✓</span>
            <span>No credit card needed</span>
          </div>
          <div class="trust-badge">
            <span class="icon">💰</span>
            <span>$2.3M duplicates found</span>
          </div>
          <div class="trust-badge">
            <span class="icon">🔒</span>
            <span>Data deleted after processing</span>
          </div>
        </div>

        <!-- Upload Card -->
        <div class="upload-card">
          <div class="free-badge">100% FREE</div>

          <div class="alert alert-warning" id="limitWarning"></div>

          <div class="upload-area" id="uploadArea">
            <div class="upload-icon">📄</div>
            <h3>Upload Your Invoice Files</h3>
            <p>
              Drag and drop your files here, or
              <span
                class="upload-link"
                onclick="document.getElementById('fileInput').click()"
                >click to browse</span
              >
            </p>
            <p class="upload-formats">Supports PDF, Excel, CSV, Word</p>
            <input
              type="file"
              id="fileInput"
              accept=".pdf,.xlsx,.xls,.csv,.docx,.doc"
              multiple
              style="display: none"
            />
          </div>

          <div
            class="upload-progress"
            id="uploadProgress"
            style="display: none"
          >
            <div class="progress-bar">
              <div class="progress-fill" id="progressBar"></div>
            </div>
            <p class="progress-text" id="progressText">Processing...</p>
          </div>

          <div class="usage-counter" id="usageCounter">
            <span id="checksRemaining">3</span> free checks remaining today
          </div>

          <div class="upload-actions">
            <button
              class="btn btn-primary"
              id="analyzeBtn"
              onclick="analyzeFiles()"
              disabled
            >
              Analyze for Duplicates
            </button>
            <button class="btn btn-secondary" onclick="showAuthModal('signup')">
              Create Account for More
            </button>
          </div>
        </div>

        <!-- Industry Impact Section -->
        <div class="industry-impact">
          <h2>The Hidden Cost of Duplicate Invoices</h2>
          <p>
            Industry research reveals the staggering financial impact of
            duplicate payments across businesses of all sizes.
          </p>

          <div class="impact-stats-grid">
            <div class="impact-stat-card">
              <span class="impact-stat-number">$12,000</span>
              <div class="impact-stat-label">Average Annual Loss</div>
              <p class="impact-stat-description">
                The typical mid-size business loses over $12,000 annually to
                duplicate invoice payments, with larger organizations facing
                losses in the hundreds of thousands.
              </p>
              <div class="impact-stat-source">
                Source: Association of Financial Professionals 2024
              </div>
            </div>

            <div class="impact-stat-card">
              <span class="impact-stat-number">2%</span>
              <div class="impact-stat-label">Invoice Duplication Rate</div>
              <p class="impact-stat-description">
                Approximately 2% of all invoices processed contain duplicates,
                meaning businesses pay twice for the same goods or services
                without realizing it.
              </p>
              <div class="impact-stat-source">
                Source: Institute of Management Accountants 2024
              </div>
            </div>

            <div class="impact-stat-card">
              <span class="impact-stat-number">60%</span>
              <div class="impact-stat-label">Have Variations</div>
              <p class="impact-stat-description">
                Most duplicate invoices contain subtle variations in vendor
                names, amounts, or dates, making them nearly impossible to
                detect with traditional exact matching.
              </p>
              <div class="impact-stat-source">
                Source: Financial Executives International 2024
              </div>
            </div>

            <div class="impact-stat-card">
              <span class="impact-stat-number">40%</span>
              <div class="impact-stat-label">Manual Detection Rate</div>
              <p class="impact-stat-description">
                Human reviewers catch only 40% of duplicate invoices during
                manual audits, leaving the majority undetected and causing
                ongoing financial losses.
              </p>
              <div class="impact-stat-source">
                Source: Association for Financial Professionals 2024
              </div>
            </div>
          </div>
        </div>

        <!-- Comprehensive How It Works Guide -->
        <div id="how-it-works" class="comprehensive-guide">
          <h2>How Our AI Duplicate Detection Works</h2>

          <details class="guide-step">
            <summary>
              <span class="step-icon">📤</span>
              <span>Step 1: Upload Your Invoice Data</span>
            </summary>
            <div class="step-content">
              <p>
                Simply drag and drop your CSV or Excel file containing invoice
                data into our secure upload area. Our system accepts files up to
                10MB with thousands of invoices. We automatically detect and
                parse common invoice fields including vendor names, invoice
                numbers, amounts, dates, and descriptions.
              </p>
              <p>
                Your data is processed in real-time using enterprise-grade
                security protocols. We use HTTPS encryption for all data
                transfers and automatically delete your files after processing
                to ensure complete privacy. The entire upload process typically
                takes less than 30 seconds, even for large datasets.
              </p>
              <p>
                Supported file formats include CSV, Excel (.xlsx, .xls), and
                tab-delimited files. Our intelligent parser automatically
                detects column headers and maps them to the appropriate invoice
                fields, eliminating the need for manual configuration in most
                cases.
              </p>
            </div>
          </details>

          <details class="guide-step">
            <summary>
              <span class="step-icon">🔍</span>
              <span>Step 2: AI-Powered Analysis</span>
            </summary>
            <div class="step-content">
              <p>
                Our advanced AI algorithms analyze every invoice in your dataset
                using sophisticated pattern recognition and fuzzy matching
                techniques. The system examines multiple data points
                simultaneously, including vendor information, invoice numbers,
                amounts, dates, and line item descriptions to identify potential
                duplicates.
              </p>
              <p>
                The AI uses machine learning models trained on millions of
                invoice records to recognize subtle patterns that indicate
                duplicate payments. It can detect variations in vendor names
                (e.g., "ACME Corp" vs "Acme Corporation"), slight differences in
                amounts, and even identify invoices that represent the same
                transaction despite having different invoice numbers.
              </p>
              <p>
                Each potential duplicate is assigned a confidence score based on
                the similarity of multiple factors. The system processes
                thousands of invoices in seconds, providing comprehensive
                analysis that would take human reviewers hours or days to
                complete manually.
              </p>
            </div>
          </details>

          <details class="guide-step">
            <summary>
              <span class="step-icon">💰</span>
              <span>Step 3: Detailed Report & Action Items</span>
            </summary>
            <div class="step-content">
              <p>
                Receive a comprehensive report detailing all potential
                duplicates found in your dataset. The report includes confidence
                scores, detailed comparisons showing exactly why invoices were
                flagged as duplicates, and estimated financial impact of each
                potential duplicate payment.
              </p>
              <p>
                Each duplicate pair is presented with side-by-side comparisons
                highlighting the similarities and differences. The report
                includes vendor information, invoice numbers, amounts, dates,
                and line items, making it easy to verify whether payments should
                be flagged for further investigation or recovery.
              </p>
              <p>
                Download the report in multiple formats including PDF for
                sharing with stakeholders, Excel for further analysis, or CSV
                for integration with your accounting systems. The report serves
                as documentation for your internal audit processes and provides
                clear evidence for vendor communications regarding duplicate
                payments.
              </p>
            </div>
          </details>

          <details class="guide-step">
            <summary>
              <span class="step-icon">🧠</span>
              <span>What Our AI Looks For</span>
            </summary>
            <div class="step-content">
              <p>
                Our AI examines multiple factors to identify duplicate invoices
                with high accuracy:
              </p>
              <ul>
                <li>
                  <strong>Vendor Name Variations:</strong> Detects "ACME Corp",
                  "Acme Corporation", "ACME INC" as the same vendor
                </li>
                <li>
                  <strong>Invoice Number Patterns:</strong> Identifies
                  sequential numbers, minor digit changes, and format variations
                </li>
                <li>
                  <strong>Amount Matching:</strong> Catches small differences
                  due to rounding, currency conversion, or data entry errors
                </li>
                <li>
                  <strong>Date Proximity:</strong> Flags invoices with similar
                  dates that might represent the same transaction
                </li>
                <li>
                  <strong>Description Similarities:</strong> Analyzes line item
                  descriptions for semantic similarity
                </li>
              </ul>
              <p>
                The AI combines these factors to build a comprehensive
                similarity profile for each invoice pair, ensuring that even
                sophisticated duplicates are caught.
              </p>
            </div>
          </details>

          <details class="guide-step">
            <summary>
              <span class="step-icon">📊</span>
              <span>Understanding Confidence Scores</span>
            </summary>
            <div class="step-content">
              <p>
                Each potential duplicate is assigned a confidence score to help
                you prioritize your review:
              </p>

              <div class="confidence-score confidence-high">
                <span>90%+</span>
                <span>Likely Duplicate - High Priority Review</span>
              </div>
              <p>
                These are almost certainly duplicate payments with strong
                evidence across multiple data points. Immediate investigation
                recommended.
              </p>

              <div class="confidence-score confidence-medium">
                <span>70-89%</span>
                <span>Possible Duplicate - Review Recommended</span>
              </div>
              <p>
                Strong indicators of duplication but may require additional
                verification. Worth investigating to confirm.
              </p>

              <div class="confidence-score confidence-low">
                <span>50-69%</span>
                <span>Review Needed - Manual Verification</span>
              </div>
              <p>
                Some similarities detected but may be legitimate separate
                transactions. Review on a case-by-case basis.
              </p>
            </div>
          </details>

          <details class="guide-step">
            <summary>
              <span class="step-icon">🔬</span>
              <span>Sample Duplicate Scenarios</span>
            </summary>
            <div class="step-content">
              <p>
                Here are real examples of duplicates our AI successfully
                detects:
              </p>

              <div class="sample-scenario">
                <h4>Scenario 1: Vendor Name Variation</h4>
                <div class="scenario-item">
                  <span class="scenario-label">Invoice A:</span>
                  <span class="scenario-value"
                    >ACME Corp - INV-001 - $1,247.50</span
                  >
                </div>
                <div class="scenario-item">
                  <span class="scenario-label">Invoice B:</span>
                  <span class="scenario-value"
                    >Acme Corporation - INV-002 - $1,247.50</span
                  >
                </div>
                <div class="scenario-item">
                  <span class="scenario-label">Confidence:</span>
                  <span class="scenario-value"
                    >94% - Same amount, same date, vendor name variation</span
                  >
                </div>
              </div>

              <div class="sample-scenario">
                <h4>Scenario 2: Amount Variation</h4>
                <div class="scenario-item">
                  <span class="scenario-label">Invoice A:</span>
                  <span class="scenario-value"
                    >Office Supplies Co - INV-456 - $2,847.99</span
                  >
                </div>
                <div class="scenario-item">
                  <span class="scenario-label">Invoice B:</span>
                  <span class="scenario-value"
                    >Office Supplies Co - INV-457 - $2,847.98</span
                  >
                </div>
                <div class="scenario-item">
                  <span class="scenario-label">Confidence:</span>
                  <span class="scenario-value"
                    >87% - Same vendor, sequential numbers, $0.01
                    difference</span
                  >
                </div>
              </div>

              <div class="sample-scenario">
                <h4>Scenario 3: Date Format Variation</h4>
                <div class="scenario-item">
                  <span class="scenario-label">Invoice A:</span>
                  <span class="scenario-value"
                    >Tech Solutions - INV-789 - $5,200.00 - 01/15/2024</span
                  >
                </div>
                <div class="scenario-item">
                  <span class="scenario-label">Invoice B:</span>
                  <span class="scenario-value"
                    >Tech Solutions - INV-790 - $5,200.00 - 15-Jan-2024</span
                  >
                </div>
                <div class="scenario-item">
                  <span class="scenario-label">Confidence:</span>
                  <span class="scenario-value"
                    >91% - Same vendor, amount, sequential numbers, different
                    date format</span
                  >
                </div>
              </div>
            </div>
          </details>
        </div>
      </div>

      <!-- Educational Content Section -->
      <div class="educational-content">
        <h2>Understanding Duplicate Invoices</h2>

        <h3>The Hidden Cost of Duplicate Invoices</h3>
        <div class="highlight-stat">
          Businesses lose 1-2% of their total revenue to duplicate payments
          annually
        </div>
        <p>
          Duplicate invoices represent one of the most significant yet often
          overlooked financial risks facing businesses today. Research shows
          that organizations lose between 1-2% of their total revenue to
          duplicate payments each year, translating to thousands or even
          millions in lost funds depending on company size.
        </p>
        <p>
          These duplicates occur through various channels. Human error accounts
          for the majority of cases, where employees accidentally process the
          same invoice twice or fail to recognize subtle differences between
          legitimate and duplicate invoices. System integration issues between
          accounting software, ERP systems, and payment platforms can also
          create duplicate entries when data synchronization fails.
        </p>
        <p>
          Perhaps most concerning is vendor fraud, where suppliers intentionally
          submit multiple invoices for the same goods or services, banking on
          the assumption that busy accounting departments won't catch the
          duplicates. This type of fraud is particularly prevalent in industries
          with complex procurement processes or high transaction volumes.
        </p>
        <p>
          The financial impact extends beyond the immediate loss of funds.
          Duplicate payments strain cash flow, create reconciliation nightmares,
          and can lead to overpayment of taxes if not caught in time. For
          growing businesses, these losses compound quickly and can
          significantly impact profitability and growth potential.
        </p>

        <h3>Why Traditional Detection Fails</h3>
        <p>
          Most businesses rely on basic exact matching to detect duplicate
          invoices, but this approach misses approximately 60% of actual
          duplicates. Exact matching only catches invoices that are identical in
          every way - same invoice number, same amount, same vendor name, and
          same date. However, real-world duplicates rarely present themselves so
          obviously.
        </p>
        <p>
          Sophisticated duplicates often include intentional variations designed
          to bypass detection systems. Fraudulent vendors might change invoice
          numbers by a single digit (INV-001 vs INV-002), modify amounts
          slightly ($1,247.50 vs $1,247.49), or use different date formats
          (01/15/2024 vs 15-Jan-2024). Even legitimate duplicates can have
          variations due to system errors, currency conversions, or data entry
          mistakes.
        </p>
        <p>
          Traditional systems also fail to account for near-duplicates where the
          core transaction is the same but supporting details differ. For
          example, an invoice for office supplies might be submitted twice with
          different line items or descriptions, but representing the same actual
          purchase. Basic matching would miss this entirely.
        </p>
        <p>
          The limitations of exact matching become even more apparent in
          high-volume environments where manual review is impractical.
          Accounting teams simply cannot manually review every invoice for
          potential duplicates, especially when subtle variations make them
          appear legitimate at first glance.
        </p>

        <h3>How AI Detection Works Better</h3>
        <p>
          Modern AI-powered duplicate detection uses sophisticated fuzzy
          matching algorithms that can identify duplicates even when they
          contain significant variations. These systems analyze multiple data
          points simultaneously, including invoice numbers, amounts, vendor
          information, dates, and line items, to build a comprehensive picture
          of each transaction.
        </p>
        <p>
          Fuzzy matching technology can detect similarities even when data
          appears different. For example, it might recognize that "ACME Corp"
          and "Acme Corporation" refer to the same vendor, or that $1,247.50 and
          $1,247.49 are likely the same amount with a minor data entry error.
          This approach catches duplicates that exact matching would miss
          entirely.
        </p>
        <p>
          Pattern recognition algorithms learn from historical data to identify
          suspicious patterns that might indicate duplicates. They can flag
          invoices that arrive unusually close together in time, or that follow
          similar submission patterns to known duplicate cases. This predictive
          capability helps catch duplicates before they're processed.
        </p>
        <p>
          Confidence scoring provides transparency in the detection process by
          assigning a probability score to each potential duplicate.
          High-confidence matches (90%+ similarity) can be automatically flagged
          for review, while medium-confidence matches might require additional
          investigation. This scoring system helps prioritize the most likely
          duplicates while reducing false positives.
        </p>
        <p>
          AI systems continuously improve their accuracy by learning from user
          feedback and new data patterns. As they process more invoices and
          receive corrections from users, they become increasingly effective at
          identifying subtle variations and emerging duplicate schemes. This
          adaptive learning ensures the system stays current with evolving fraud
          tactics.
        </p>
      </div>

      <!-- Report Preview Snippet -->
      <div style="text-align: center; margin: 2rem 0">
        <div
          style="
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            max-width: 400px;
            margin: 0 auto;
            text-align: left;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
          "
        >
          <div
            style="
              color: var(--text-primary);
              margin-bottom: 0.5rem;
              font-weight: 600;
            "
          >
            Sample Result:
          </div>
          <div style="color: var(--text-secondary); margin-bottom: 0.75rem">
            Found 3 duplicates • $2,450 potential savings
          </div>
          <div
            style="
              color: var(--border);
              margin-bottom: 0.75rem;
              font-size: 0.7rem;
            "
          >
            ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
          </div>
          <div style="color: var(--text-primary); margin-bottom: 0.25rem">
            Invoice #127 duplicated →
            <span style="color: #57f287; font-weight: 600">95% match</span>,
            <span style="color: var(--success); font-weight: 600"
              >$1,200 at risk</span
            >
          </div>
          <div style="color: var(--text-primary); margin-bottom: 0.25rem">
            Invoice #89 duplicated →
            <span style="color: #fee75c; font-weight: 600">87% match</span>,
            <span style="color: var(--success); font-weight: 600"
              >$850 at risk</span
            >
          </div>
          <div style="color: var(--text-primary)">
            Invoice #203 duplicated →
            <span style="color: #ed4245; font-weight: 600">72% match</span>,
            <span style="color: var(--success); font-weight: 600"
              >$400 at risk</span
            >
          </div>
        </div>
      </div>

      <!-- Best Practices Guide -->
      <div class="best-practices-guide">
        <button class="best-practices-toggle" onclick="toggleBestPractices()">
          <span>Show Best Practices Guide</span>
          <span class="toggle-icon">▼</span>
        </button>

        <div class="best-practices-content">
          <div class="best-practices-sections">
            <div class="best-practices-section">
              <h3>
                <span>📋</span>
                Preparing Your File
              </h3>
              <p>
                To get the most accurate results from our duplicate detection,
                follow these formatting guidelines:
              </p>
              <ul>
                <li>
                  <strong>Required Columns:</strong> Vendor Name, Invoice
                  Number, Amount, Date
                </li>
                <li>
                  <strong>Date Format:</strong> Use MM/DD/YYYY or YYYY-MM-DD for
                  consistency
                </li>
                <li>
                  <strong>Amount Format:</strong> Include currency symbols ($)
                  and avoid commas in thousands
                </li>
                <li>
                  <strong>Vendor Names:</strong> Keep consistent spelling and
                  avoid abbreviations
                </li>
                <li>
                  <strong>Invoice Numbers:</strong> Include leading zeros and
                  maintain original formatting
                </li>
                <li>
                  <strong>File Size:</strong> Keep individual files under 10MB
                  for optimal processing
                </li>
              </ul>
              <p>
                For Excel files, ensure data starts from row 1 and avoid merged
                cells or complex formatting that could interfere with data
                extraction.
              </p>
            </div>

            <div class="best-practices-section">
              <h3>
                <span>🔍</span>
                Interpreting Results
              </h3>
              <p>
                Understanding our duplicate detection results helps you make
                informed decisions:
              </p>
              <ul>
                <li>
                  <strong>90%+ Confidence:</strong> Very likely duplicates -
                  review immediately
                </li>
                <li>
                  <strong>70-89% Confidence:</strong> Possible duplicates -
                  investigate carefully
                </li>
                <li>
                  <strong>50-69% Confidence:</strong> Potential matches - manual
                  review recommended
                </li>
                <li>
                  <strong>Below 50%:</strong> Unlikely duplicates - review only
                  if suspicious
                </li>
              </ul>
              <p>
                Each flagged duplicate shows the matching criteria, including
                vendor name similarity, amount differences, and date proximity.
                Review the explanation to understand why items were flagged and
                verify the matches before taking action.
              </p>
            </div>

            <div class="best-practices-section">
              <h3>
                <span>⚡</span>
                Taking Action
              </h3>
              <p>
                Once duplicates are identified, follow these steps to resolve
                them effectively:
              </p>
              <ul>
                <li>
                  <strong>Verify First:</strong> Confirm duplicates are genuine
                  before taking action
                </li>
                <li>
                  <strong>Contact Vendor:</strong> Reach out to clarify billing
                  discrepancies
                </li>
                <li>
                  <strong>Document Everything:</strong> Keep records of all
                  communications and decisions
                </li>
                <li>
                  <strong>Update Systems:</strong> Mark duplicates in your
                  accounting system
                </li>
                <li>
                  <strong>Request Refunds:</strong> Process refunds or credits
                  for confirmed duplicates
                </li>
                <li>
                  <strong>Follow Up:</strong> Ensure all duplicate payments are
                  properly resolved
                </li>
              </ul>
              <p>
                Create a standard process for handling duplicates to ensure
                consistency and prevent similar issues in the future.
              </p>
            </div>

            <div class="best-practices-section">
              <h3>
                <span>🛡️</span>
                Prevention Tips
              </h3>
              <p>
                Implement these controls to minimize duplicate invoices in the
                future:
              </p>
              <ul>
                <li>
                  <strong>Automated Matching:</strong> Set up system rules to
                  flag potential duplicates
                </li>
                <li>
                  <strong>Approval Workflows:</strong> Require multiple
                  approvals for large payments
                </li>
                <li>
                  <strong>Vendor Management:</strong> Maintain clean vendor
                  databases with standardized names
                </li>
                <li>
                  <strong>Regular Audits:</strong> Schedule monthly duplicate
                  detection reviews
                </li>
                <li>
                  <strong>Staff Training:</strong> Educate team on duplicate
                  prevention techniques
                </li>
                <li>
                  <strong>System Integration:</strong> Use integrated accounting
                  systems to reduce manual entry
                </li>
              </ul>
              <p>
                Consider implementing purchase order systems and three-way
                matching to catch duplicates before payments are made.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Results Card -->
      <div class="results-card" id="resultsCard">
        <h2 style="margin-bottom: 1.5rem">Analysis Complete!</h2>

        <div class="summary-grid">
          <div class="stat-card">
            <div class="stat-value" id="totalInvoices">0</div>
            <div class="stat-label">Total Invoices</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="duplicatesFound">0</div>
            <div class="stat-label">Duplicates Found</div>
          </div>
          <div class="stat-card highlight">
            <div class="stat-value" id="potentialSavings">$0</div>
            <div class="stat-label">Potential Savings</div>
          </div>
        </div>

        <div id="duplicatesList"></div>

        <div
          style="display: flex; gap: 1rem; margin-top: 1rem; flex-wrap: wrap"
        >
          <button
            class="btn btn-primary"
            onclick="downloadReport('excel')"
            style="flex: 1; min-width: 200px"
          >
            📊 Download Excel
          </button>
          <button
            class="btn btn-primary"
            onclick="downloadReport('pdf')"
            style="flex: 1; min-width: 200px"
          >
            📄 Download PDF
          </button>
          <button
            class="btn btn-primary"
            onclick="downloadReport('text')"
            style="flex: 1; min-width: 200px"
          >
            📝 Download Text
          </button>
        </div>
      </div>

      <!-- Common Duplicate Invoice Scenarios -->
      <div class="scenarios-section">
        <div class="scenarios-header">
          <h2>Common Duplicate Invoice Scenarios</h2>
          <p>
            Real-world examples of how duplicate invoices slip through
            traditional detection methods and how our AI catches them.
          </p>
        </div>

        <div class="scenarios-grid">
          <div class="scenario-card">
            <h3>
              <span class="scenario-icon">📄</span>
              The Resubmitted Invoice
            </h3>
            <p class="scenario-description">
              A vendor accidentally sends the same invoice twice due to a system
              error or communication breakdown. Invoice INV-1234 for $2,500
              appears in your system twice, but with slightly different
              submission dates. Traditional exact matching might miss this if
              there are minor variations in formatting or timestamps.
            </p>
            <div class="scenario-example">
              <span class="example-label">Example:</span>
              INV-1234 | $2,500 | 01/15/2024 | Office Supplies INV-1234 | $2,500
              | 01/16/2024 | Office Supplies
            </div>
            <div class="dupecheck-solution">
              <h4>
                <span class="solution-icon">✅</span>
                How DupeCheck Catches It
              </h4>
              <p>
                Our AI recognizes identical invoice numbers and amounts,
                flagging this as a 95% confidence duplicate despite the one-day
                difference in submission dates. The system highlights the exact
                match and provides clear evidence for recovery.
              </p>
            </div>
          </div>

          <div class="scenario-card">
            <h3>
              <span class="scenario-icon">⚙️</span>
              The System Glitch
            </h3>
            <p class="scenario-description">
              Your accounting system processes the same purchase order through
              two different modules, creating duplicate entries with different
              internal reference numbers. PO-789 gets processed once through the
              procurement system and again through the accounts payable module,
              resulting in two payments for the same goods.
            </p>
            <div class="scenario-example">
              <span class="example-label">Example:</span>
              PO-789-A | $1,800 | Tech Equipment | Proc System PO-789-B | $1,800
              | Tech Equipment | AP System
            </div>
            <div class="dupecheck-solution">
              <h4>
                <span class="solution-icon">✅</span>
                How DupeCheck Catches It
              </h4>
              <p>
                Our AI analyzes the underlying transaction details beyond just
                reference numbers. It identifies the identical amounts, dates,
                and vendor information, recognizing this as a system-generated
                duplicate with 92% confidence.
              </p>
            </div>
          </div>

          <div class="scenario-card">
            <h3>
              <span class="scenario-icon">🏢</span>
              The Name Variation
            </h3>
            <p class="scenario-description">
              A vendor submits invoices using different variations of their
              company name. "ABC Corp" sends one invoice, while "ABC
              Corporation" sends another for the same service. This often
              happens when different departments or systems use different vendor
              master data entries, making it nearly impossible for exact
              matching to detect.
            </p>
            <div class="scenario-example">
              <span class="example-label">Example:</span>
              ABC Corp | INV-456 | $3,200 | Consulting Services ABC Corporation
              | INV-457 | $3,200 | Consulting Services
            </div>
            <div class="dupecheck-solution">
              <h4>
                <span class="solution-icon">✅</span>
                How DupeCheck Catches It
              </h4>
              <p>
                Our fuzzy matching algorithms recognize "ABC Corp" and "ABC
                Corporation" as the same entity. Combined with identical amounts
                and similar invoice numbers, the AI flags this as an 88%
                confidence duplicate, catching what exact matching would miss.
              </p>
            </div>
          </div>

          <div class="scenario-card">
            <h3>
              <span class="scenario-icon">🔀</span>
              The Split Invoice Scheme
            </h3>
            <p class="scenario-description">
              A vendor intentionally submits one service as multiple invoices to
              bypass approval limits or hide the total cost. A $10,000
              consulting project gets billed as two $5,000 invoices with
              different line items and descriptions, but represents the same
              work performed during the same period.
            </p>
            <div class="scenario-example">
              <span class="example-label">Example:</span>
              INV-789 | $5,000 | "Project Phase 1" | 01/10/2024 INV-790 | $5,000
              | "Project Phase 2" | 01/12/2024
            </div>
            <div class="dupecheck-solution">
              <h4>
                <span class="solution-icon">✅</span>
                How DupeCheck Catches It
              </h4>
              <p>
                Our AI analyzes patterns across multiple invoices from the same
                vendor. It identifies suspicious timing, similar amounts, and
                related descriptions, flagging this as a 76% confidence
                duplicate requiring manual review for potential fraud.
              </p>
            </div>
          </div>

          <div class="scenario-card">
            <h3>
              <span class="scenario-icon">🔄</span>
              The Monthly Recurring Error
            </h3>
            <p class="scenario-description">
              A subscription service accidentally bills your company twice for
              the same monthly period due to a billing system error. The same
              $299 monthly software license appears twice with identical
              details, but your accounting team processes both thinking they're
              for different months or services.
            </p>
            <div class="scenario-example">
              <span class="example-label">Example:</span>
              INV-2024-001 | $299 | "Monthly License Jan" | 01/01/2024
              INV-2024-002 | $299 | "Monthly License Jan" | 01/03/2024
            </div>
            <div class="dupecheck-solution">
              <h4>
                <span class="solution-icon">✅</span>
                How DupeCheck Catches It
              </h4>
              <p>
                Our AI recognizes the identical amounts, vendor, and service
                description, even with different invoice numbers. The system
                flags this as a 96% confidence duplicate, preventing the double
                payment and saving you $299.
              </p>
            </div>
          </div>

          <div class="scenario-card">
            <h3>
              <span class="scenario-icon">🌍</span>
              The Currency Conversion Duplicate
            </h3>
            <p class="scenario-description">
              An international vendor submits the same invoice in two different
              currencies due to system processing errors. The original invoice
              in EUR gets processed, then the same transaction gets converted
              and processed again in USD, resulting in duplicate payments with
              slightly different amounts due to exchange rate variations.
            </p>
            <div class="scenario-example">
              <span class="example-label">Example:</span>
              INV-EUR-123 | €2,100 | "Software License" | 01/15/2024 INV-USD-123
              | $2,268 | "Software License" | 01/15/2024
            </div>
            <div class="dupecheck-solution">
              <h4>
                <span class="solution-icon">✅</span>
                How DupeCheck Catches It
              </h4>
              <p>
                Our AI recognizes identical invoice numbers, dates, and
                descriptions despite currency differences. It calculates the
                exchange rate and identifies this as a 91% confidence duplicate,
                catching cross-currency duplicates that traditional systems
                miss.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Pricing Section -->
      <!-- Pricing Section -->
      <div class="pricing-section" id="pricingSection">
        <div class="pricing-header">
          <h2>Simple, Transparent Pricing</h2>
          <p style="color: var(--text-secondary)">
            Start free, upgrade when you need more
          </p>
        </div>

        <!-- Free Tier Banner -->
        <div class="free-tier-banner">
          <span class="icon">✓</span>
          <div>
            <h3>Free Tier: 3 analyses daily • 100 invoices max per file</h3>
            <p>No signup required • Perfect for small checks</p>
          </div>
        </div>

        <div class="pricing-grid" style="grid-template-columns: repeat(3, 1fr)">
          <!-- Free Tier -->
          <div class="pricing-card">
            <h3>Free Tier</h3>
            <div class="price"><span class="currency">$</span>0</div>
            <p
              style="
                color: var(--text-secondary);
                margin-top: -0.5rem;
                margin-bottom: 1rem;
              "
            >
              No credit card required
            </p>
            <ul class="features-list">
              <li>
                <span class="check">✓</span> <strong>3 analyses per day</strong>
              </li>
              <li><span class="check">✓</span> 100 invoices per file</li>
              <li><span class="check">✓</span> Instant results</li>
              <li><span class="check">✓</span> Basic duplicate detection</li>
              <li style="color: var(--danger)">
                <span style="opacity: 0.5">✗</span> No analysis history
              </li>
              <li style="color: var(--danger)">
                <span style="opacity: 0.5">✗</span> No saved reports
              </li>
            </ul>
            <button
              class="btn btn-primary btn-block"
              onclick="scrollToUpload()"
              style="border: 2px solid var(--border)"
            >
              Try Now
            </button>
          </div>

          <!-- Starter Pack -->
          <div class="pricing-card">
            <h3>Starter Pack</h3>
            <div class="price"><span class="currency">$</span>5</div>
            <p
              style="
                color: var(--text-secondary);
                margin-top: -0.5rem;
                margin-bottom: 1rem;
              "
            >
              100 credits
            </p>
            <ul class="features-list">
              <li>
                <span class="check">✓</span> <strong>100 analyses</strong>
              </li>
              <li>
                <span class="check">✓</span>
                <strong style="color: var(--secondary)"
                  >2,500 invoices per file</strong
                >
              </li>
              <li><span class="check">✓</span> Never expire</li>
              <li><span class="check">✓</span> PDF & Excel reports</li>
            </ul>
            <button
              class="btn btn-primary btn-block"
              onclick="upgrade('starter')"
            >
              Buy Credits
            </button>
          </div>

          <!-- Pro Pack -->
          <div class="pricing-card featured">
            <div class="badge">BEST VALUE</div>
            <h3>Professional Pack</h3>
            <div class="price"><span class="currency">$</span>19</div>
            <p
              style="
                color: var(--text-secondary);
                margin-top: -0.5rem;
                margin-bottom: 1rem;
              "
            >
              500 credits
            </p>
            <ul class="features-list">
              <li>
                <span class="check">✓</span> <strong>500 analyses</strong>
              </li>
              <li>
                <span class="check">✓</span>
                <strong style="color: var(--secondary)"
                  >2,500 invoices per file</strong
                >
              </li>
              <li><span class="check">✓</span> Never expire</li>
              <li><span class="check">✓</span> PDF & Excel reports</li>
            </ul>
            <button
              class="btn btn-primary btn-block"
              onclick="upgrade('professional')"
            >
              Buy Credits
            </button>
          </div>
        </div>
      </div>

      <!-- Security & Compliance Section -->
      <div class="security-section">
        <div class="security-header">
          <h2>Security & Compliance</h2>
          <p>
            Your financial data security is our top priority. We've built
            DupeCheck with enterprise-grade security measures to ensure your
            sensitive information is protected at every step.
          </p>
        </div>

        <div class="security-grid">
          <div class="security-item">
            <span class="security-icon">🔒</span>
            <h3>Data Privacy</h3>
            <p>
              Your invoice files are automatically deleted immediately after
              processing is complete. We never store, backup, or archive your
              financial information. Your data remains in our system only for
              the few seconds needed to complete the duplicate detection
              analysis.
            </p>
          </div>

          <div class="security-item">
            <span class="security-icon">🗑️</span>
            <h3>No Storage Policy</h3>
            <p>
              We operate on a strict zero-retention policy. Nothing is saved on
              our servers after analysis. The only data we retain is anonymous
              usage statistics (processing times, file types) for system
              optimization - never your actual invoice data or financial
              information.
            </p>
          </div>

          <div class="security-item">
            <span class="security-icon">🛡️</span>
            <h3>Encryption</h3>
            <p>
              All data transmission is protected with industry-standard SSL/TLS
              encryption. Your files are encrypted during upload, processing,
              and any temporary storage. We use 256-bit encryption to ensure
              your sensitive financial data is secure throughout the entire
              process.
            </p>
          </div>

          <div class="security-item">
            <span class="security-icon">✅</span>
            <h3>Compliance</h3>
            <p>
              Our infrastructure and processes are designed to align with GDPR,
              SOC 2 Type II, and other major compliance frameworks. We maintain
              strict access controls, regular security audits, and follow
              industry best practices for data protection and privacy.
            </p>
          </div>
        </div>

        <div class="users-section">
          <h3>Who Uses DupeCheck</h3>
          <p style="color: var(--text-secondary); margin-bottom: 1.5rem">
            Trusted by businesses across industries to protect their financial
            operations
          </p>
          <div class="users-list">
            <div class="user-type">Accounting Firms</div>
            <div class="user-type">Small & Medium Businesses</div>
            <div class="user-type">Financial Controllers</div>
            <div class="user-type">Accounts Payable Teams</div>
            <div class="user-type">CFOs & Finance Directors</div>
            <div class="user-type">Bookkeepers</div>
            <div class="user-type">Audit Firms</div>
            <div class="user-type">Non-Profit Organizations</div>
          </div>
        </div>
      </div>

      <!-- FAQ Section -->
      <div class="faq-section">
        <h2>Frequently Asked Questions</h2>
        <p>
          Get answers to common questions about our duplicate invoice detection
          service
        </p>

        <div class="faq-accordion">
          <div class="faq-item">
            <button class="faq-question" onclick="toggleFAQ(this)">
              <span>How accurate is the duplicate detection?</span>
              <span class="faq-icon">▼</span>
            </button>
            <div class="faq-answer">
              <p>
                Our AI-powered system achieves a 95% accuracy rate in detecting
                duplicate invoices. This high accuracy comes from advanced
                machine learning algorithms that analyze multiple data points
                including vendor names, amounts, dates, and invoice
                descriptions. The system can identify both exact duplicates and
                subtle variations that human reviewers often miss. False
                positives are kept to a minimum through sophisticated confidence
                scoring, and you can always review flagged items before taking
                action. The 95% rate is based on extensive testing with
                thousands of real-world invoice datasets.
              </p>
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-question" onclick="toggleFAQ(this)">
              <span>What file formats are supported?</span>
              <span class="faq-icon">▼</span>
            </button>
            <div class="faq-answer">
              <p>
                We support all major invoice file formats including PDF, Excel
                (.xlsx, .xls), CSV, and Word documents (.docx, .doc). Our system
                can extract text and data from scanned PDFs using advanced OCR
                technology, making it compatible with both digital and
                paper-based invoices. For bulk processing, CSV and Excel formats
                are recommended as they provide the cleanest data extraction.
                There's no file size limit for individual uploads, and you can
                process hundreds of invoices simultaneously. All processing
                happens securely in our cloud infrastructure.
              </p>
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-question" onclick="toggleFAQ(this)">
              <span>How is my data protected?</span>
              <span class="faq-icon">▼</span>
            </button>
            <div class="faq-answer">
              <p>
                Your data security is our top priority. All file uploads are
                encrypted using 256-bit SSL encryption during transmission and
                storage. We use enterprise-grade cloud infrastructure with SOC 2
                Type II compliance. Your invoice data is automatically deleted
                immediately after processing - we never store your financial
                information long-term. Our servers are located in secure data
                centers with 24/7 monitoring and access controls. We don't share
                your data with third parties, and all processing is done in
                isolated, secure environments. Regular security audits ensure
                our systems meet the highest industry standards.
              </p>
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-question" onclick="toggleFAQ(this)">
              <span>What's the difference between free and paid?</span>
              <span class="faq-icon">▼</span>
            </button>
            <div class="faq-answer">
              <p>
                The free version allows you to analyze up to 10 invoices per
                month with basic duplicate detection. It's perfect for small
                businesses or individuals testing the service. The paid plans
                offer unlimited invoice processing, advanced AI detection with
                higher accuracy rates, bulk file uploads, detailed reporting
                with export options, priority customer support, and API access
                for integration with existing accounting systems. Paid users
                also get confidence scoring explanations, custom detection
                rules, and faster processing times. Choose the plan that fits
                your volume and business needs.
              </p>
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-question" onclick="toggleFAQ(this)">
              <span>Can it detect partial duplicates?</span>
              <span class="faq-icon">▼</span>
            </button>
            <div class="faq-answer">
              <p>
                Yes, our system excels at detecting partial duplicates that
                traditional exact-matching tools miss. We can identify invoices
                where only portions are duplicated, such as when a vendor splits
                one service into multiple invoices or when the same purchase
                order generates several related invoices. The AI analyzes
                invoice line items, vendor information, amounts, and dates to
                find these complex patterns. This includes detecting cases where
                the same vendor submits multiple invoices for the same project
                with slightly different amounts or descriptions. Our fuzzy
                matching algorithms catch these subtle variations that represent
                60% of all duplicate invoices.
              </p>
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-question" onclick="toggleFAQ(this)">
              <span>How do confidence scores work?</span>
              <span class="faq-icon">▼</span>
            </button>
            <div class="faq-answer">
              <p>
                Confidence scores indicate how certain our AI is that two
                invoices are duplicates. Scores of 90% or higher indicate a very
                likely duplicate that should be reviewed immediately. Scores
                between 70-89% suggest possible duplicates requiring careful
                examination. Scores of 50-69% indicate potential matches that
                need manual review. Scores below 50% are unlikely to be
                duplicates. The scoring considers multiple factors including
                vendor name similarity, amount matching, date proximity, and
                description overlap. Each score includes an explanation of why
                the match was flagged, helping you make informed decisions about
                which duplicates to investigate further.
              </p>
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-question" onclick="toggleFAQ(this)">
              <span>What happens to my data after analysis?</span>
              <span class="faq-icon">▼</span>
            </button>
            <div class="faq-answer">
              <p>
                Your invoice data is automatically and permanently deleted from
                our servers immediately after the analysis is complete. We don't
                store, backup, or archive your financial information. The only
                data we retain is anonymous usage statistics (like processing
                times and file types) for system optimization purposes. This
                ensures your sensitive financial data never remains in our
                system longer than necessary. You'll receive your duplicate
                detection report via email, and you can download additional
                copies from your browser session. Our deletion process is
                automated and cannot be reversed, providing maximum security for
                your confidential invoice information.
              </p>
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-question" onclick="toggleFAQ(this)">
              <span>Can I analyze multiple files?</span>
              <span class="faq-icon">▼</span>
            </button>
            <div class="faq-answer">
              <p>
                Yes, you can upload and analyze multiple invoice files
                simultaneously. Our bulk processing feature supports up to 100
                files at once, with each file containing multiple invoices. The
                system will cross-reference all invoices across all files to
                find duplicates, not just within individual files. This is
                particularly useful for businesses that receive invoices from
                multiple sources or have invoices stored in different systems.
                You can upload files in different formats (PDF, Excel, CSV) in
                the same batch. The processing time scales efficiently with the
                number of files, and you'll receive a comprehensive report
                showing all detected duplicates across your entire dataset.
              </p>
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-question" onclick="toggleFAQ(this)">
              <span>How are potential savings calculated?</span>
              <span class="faq-icon">▼</span>
            </button>
            <div class="faq-answer">
              <p>
                Savings calculations are based on the total value of detected
                duplicate invoices. If we find duplicate invoices worth $5,000,
                your potential savings would be $5,000 (the amount you would
                have paid twice). The calculation assumes you would have paid
                both invoices if the duplicates weren't detected. We also factor
                in the cost of manual review time - typically $25-50 per hour
                for accounting staff to manually check for duplicates. Our
                reports show both direct financial savings (duplicate amounts)
                and indirect savings (time costs). These are conservative
                estimates that don't include potential penalties, interest, or
                additional administrative costs of duplicate payments.
              </p>
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-question" onclick="toggleFAQ(this)">
              <span>Does it work with non-English invoices?</span>
              <span class="faq-icon">▼</span>
            </button>
            <div class="faq-answer">
              <p>
                Yes, our system supports invoices in multiple languages
                including Spanish, French, German, Italian, Portuguese, and many
                others. The AI uses advanced natural language processing that
                can identify duplicate patterns regardless of language. It
                focuses on numerical data (amounts, dates, invoice numbers) and
                structural patterns rather than just text matching. However,
                accuracy may be slightly lower for non-English invoices
                depending on the complexity of the language and formatting. For
                best results with international invoices, we recommend ensuring
                clear, well-formatted documents. The system works particularly
                well with invoices that follow standard international formats
                and include recognizable numerical patterns.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer class="footer">
        <div class="container">
          <div class="footer-content">
            <div class="footer-brand-section">
              <div class="footer-brand">DupeCheck</div>
              <p>Instant duplicate invoice detection</p>
              <p class="footer-powered">
                Built by
                <a href="https://forgeapis.com" style="color: var(--primary)"
                  >Forge APIs</a
                >
              </p>
            </div>

            <div class="footer-links" style="display: flex; gap: 4rem">
              <div class="footer-column">
                <h4>Product</h4>
                <a href="#pricingSection">Pricing</a>
                <a href="#how-it-works">How It Works</a>
              </div>

              <div class="footer-column">
                <h4>Support</h4>
                <a href="mailto:hello@forgeapis.com">Contact Us</a>
                <a href="https://forgeapis.com">About Forge APIs</a>
              </div>
            </div>
          </div>

          <div class="footer-bottom">
            <div>
              <p>&copy; 2024 Forge APIs. All rights reserved.</p>
              <p class="footer-note">
                Your data is deleted immediately after processing. We never
                store invoice information.
              </p>
            </div>
            <div style="display: flex; gap: 1.5rem; font-size: 0.85rem">
              <a
                href="https://forgeapis.com/privacy"
                style="color: var(--text-secondary)"
                >Privacy Policy</a
              >
              <a
                href="https://forgeapis.com/terms"
                style="color: var(--text-secondary)"
                >Terms of Service</a
              >
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div style="text-align: center; max-width: 400px; margin: 0 auto">
        <div
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
          "
        >
          <div class="spinner"></div>
          <p style="font-size: 1.1rem; font-weight: 600; margin: 0">
            Analyzing invoices...
          </p>
        </div>

        <!-- Progress bar -->
        <div
          style="
            background: var(--bg-card);
            border-radius: 8px;
            height: 8px;
            margin: 1.5rem 0 0.5rem 0;
            overflow: hidden;
          "
        >
          <div
            id="progressBar"
            style="
              background: linear-gradient(
                90deg,
                var(--primary),
                var(--secondary)
              );
              height: 100%;
              width: 0%;
              transition: width 0.3s ease;
              border-radius: 8px;
            "
          ></div>
        </div>
        <p
          id="progressText"
          style="color: var(--text-secondary); font-size: 0.9rem; margin: 0"
        >
          Uploading file...
        </p>
      </div>
    </div>

    <!-- Custom Modal -->
    <div class="custom-modal" id="customModal">
      <div class="custom-modal-content">
        <div class="custom-modal-header">
          <div class="custom-modal-icon" id="modalIcon">
            <span id="modalIconSymbol">ℹ️</span>
          </div>
          <h3 class="custom-modal-title" id="modalTitle">Notice</h3>
        </div>
        <div class="custom-modal-message" id="modalMessage">
          Message goes here
        </div>
        <div class="custom-modal-footer">
          <button
            class="custom-modal-btn custom-modal-btn-secondary"
            id="modalCancelBtn"
            style="display: none"
          >
            Cancel
          </button>
          <button
            class="custom-modal-btn custom-modal-btn-primary"
            id="modalOkBtn"
          >
            OK
          </button>
        </div>
      </div>
    </div>

    <!-- Confidence Score Tooltip -->
    <div class="confidence-tooltip" id="confidenceTooltip">
      <div class="confidence-tooltip-content">
        <div class="confidence-tooltip-header">
          <h3>Why Confidence Scores?</h3>
          <button
            class="confidence-tooltip-close"
            onclick="closeConfidenceTooltip()"
          >
            ×
          </button>
        </div>
        <div class="confidence-tooltip-body">
          <p><strong>Real duplicates rarely look identical.</strong></p>
          <p>
            In practice, duplicate invoices often have small variations due to:
          </p>
          <ul>
            <li>
              <strong>Human error:</strong> Invoice #1234 entered as #1235
            </li>
            <li>
              <strong>Different systems:</strong> "ABC Corp" in one system, "ABC
              Corporation" in another
            </li>
            <li>
              <strong>Deliberate changes:</strong> Someone submits INV-2024
              twice as INV-2024A
            </li>
          </ul>
          <p>Our AI scores how similar invoices are:</p>
          <div class="confidence-levels">
            <div class="confidence-level">
              <span class="confidence-badge high">90%+</span>
              <span
                >Almost certainly duplicate (same vendor, amount, similar
                invoice #)</span
              >
            </div>
            <div class="confidence-level">
              <span class="confidence-badge medium">70-89%</span>
              <span>Likely duplicate, worth investigating</span>
            </div>
            <div class="confidence-level">
              <span class="confidence-badge low">50-69%</span>
              <span>Possible duplicate, review if high-value</span>
            </div>
          </div>
          <p class="confidence-example">
            <strong>Example:</strong> Two $5,000 invoices from "Smith & Co" and
            "Smith and Company" with invoice numbers 1234 and 1234-A would score
            ~85% - catching what exact matching would miss.
          </p>
        </div>
      </div>
    </div>

    <script>
      // Configuration
      const API_URL = "https://dupecheck-production.up.railway.app";

      function getOrCreateDeviceToken() {
        let deviceToken = localStorage.getItem("dupecheck_device_token");

        if (!deviceToken) {
          // Generate ONCE and store immediately
          deviceToken =
            "anon_" +
            Math.random().toString(36).substring(2, 10) +
            Date.now().toString(36).substring(-6);
          localStorage.setItem("dupecheck_device_token", deviceToken);
          console.log("Created new device token:", deviceToken);
        }
        return deviceToken;
      }

      // Custom Modal System
      function showModal(options = {}) {
        const modal = document.getElementById("customModal");
        const icon = document.getElementById("modalIcon");
        const iconSymbol = document.getElementById("modalIconSymbol");
        const title = document.getElementById("modalTitle");
        const message = document.getElementById("modalMessage");
        const okBtn = document.getElementById("modalOkBtn");
        const cancelBtn = document.getElementById("modalCancelBtn");

        // Set type (error, info, success, warning)
        const type = options.type || "info";
        icon.className = `custom-modal-icon ${type}`;

        // Set icon based on type
        const icons = {
          error: "❌",
          info: "ℹ️",
          success: "✅",
          warning: "⚠️",
        };
        iconSymbol.textContent = icons[type] || icons.info;

        // Set title and message
        title.textContent = options.title || "Notice";
        message.textContent = options.message || "";

        // Handle buttons
        if (options.showCancel) {
          cancelBtn.style.display = "block";
          cancelBtn.onclick = () => {
            closeModal();
            if (options.onCancel) options.onCancel();
          };
        } else {
          cancelBtn.style.display = "none";
        }

        // Handle OK button visibility
        if (options.hideOkButton) {
          okBtn.style.display = "none";
        } else {
          okBtn.style.display = "block";
          okBtn.textContent = options.okText || "OK";
          okBtn.onclick = () => {
            closeModal();
            if (options.onOk) options.onOk();
          };
        }

        // Show modal
        modal.classList.add("active");

        // Close on backdrop click
        modal.onclick = (e) => {
          if (e.target === modal) {
            closeModal();
          }
        };
      }

      function closeModal() {
        document.getElementById("customModal").classList.remove("active");
      }

      // Confidence Score Tooltip Functions
      function showConfidenceTooltip() {
        document.getElementById("confidenceTooltip").classList.add("active");
      }

      function closeConfidenceTooltip() {
        document.getElementById("confidenceTooltip").classList.remove("active");
      }

      // Replace alert with custom modal
      function customAlert(message, type = "info") {
        showModal({
          type: type,
          title: type === "error" ? "Error" : "Notice",
          message: message,
        });
      }

      function clearWarningMessages() {
        // Clear any existing warning messages in the usage counter
        const usageCounter = document.getElementById("usageCounter");
        if (usageCounter) {
          // Reset to normal state without warning text
          usageCounter.innerHTML = `
            <span class="count" id="checksRemaining">...</span>
            <span>loading...</span>
          `;
        }

        // Clear the limit warning in the file upload area
        const limitWarning = document.getElementById("limitWarning");
        if (limitWarning) {
          limitWarning.classList.remove("active");
          limitWarning.innerHTML = "";
        }

        // Clear any custom modal warnings
        const modal = document.getElementById("customModal");
        if (modal && modal.style.display !== "none") {
          closeModal();
        }
      }

      // State management
      let currentUser = null;
      let authToken = localStorage.getItem("dupecheck_token");
      let authMode = "login";
      let uploadedFile = null;
      let analysisResults = null;

      // Initialize
      // Initialize
      document.addEventListener("DOMContentLoaded", async () => {
        // Hide all UI elements that depend on auth state
        const authButtons = document.getElementById("authButtons");
        const userMenu = document.getElementById("userMenu");
        const usageCounter = document.getElementById("usageCounter");

        const urlParams = new URLSearchParams(window.location.search);
        const paymentStatus = urlParams.get("payment");
        const sessionId = urlParams.get("session_id");
        const resetToken = urlParams.get("reset");
        const verifyToken = urlParams.get("verify");

        // Handle email verification FIRST (before any other URL param handling)
        if (verifyToken) {
          await handleEmailVerification(verifyToken);
          return; // Exit early after verification
        }

        // Handle payment status FIRST (before any other URL param handling)
        if (paymentStatus === "success") {
          // Clean URL immediately
          window.history.replaceState(
            {},
            document.title,
            window.location.pathname
          );

          // Show success message after a brief delay
          setTimeout(() => {
            showModal({
              type: "success",
              title: "Payment Successful! 🎉",
              message:
                "Your credits have been added to your account. You can now analyze files up to 2,500 invoices!",
              onOk: () => {
                // Refresh credit balance if logged in
                if (authToken) {
                  fetchCreditBalance();
                }
              },
            });
          }, 500);
        } else if (paymentStatus === "cancelled") {
          // Clean URL immediately
          window.history.replaceState(
            {},
            document.title,
            window.location.pathname
          );

          // Show cancelled message
          setTimeout(() => {
            showModal({
              type: "info",
              title: "Payment Cancelled",
              message:
                "Your payment was cancelled. You can purchase credits anytime from the pricing section.",
            });
          }, 500);
        }

        // Check for password reset token
        if (resetToken) {
          // Clear the URL parameter
          window.history.replaceState(
            {},
            document.title,
            window.location.pathname
          );

          // Show password reset modal after a brief delay to ensure DOM is ready
          setTimeout(() => {
            showPasswordResetModal(resetToken);
          }, 100);
        }

        // Initially hide UI elements
        authButtons.style.display = "none";
        userMenu.style.display = "none";
        usageCounter.style.display = "none"; // Hide counter initially

        // Check authentication status
        if (authToken) {
          // Wait for auth check to complete
          await checkAuth();
        } else {
          // Check anonymous user's remaining count
          await checkAnonymousUsage();
        }

        // Now show the counter with correct data
        usageCounter.style.display = "flex"; // Show counter after check

        // Update UI based on authentication status
        updateUI();

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
          anchor.addEventListener("click", function (e) {
            const href = this.getAttribute("href");

            // Skip if href is just "#" or empty
            if (!href || href === "#") {
              e.preventDefault();
              return;
            }

            e.preventDefault();
            const target = document.querySelector(href);
            if (target) {
              const navHeight = document.querySelector("nav").offsetHeight;
              const targetPosition = target.offsetTop - navHeight - 20;
              window.scrollTo({
                top: targetPosition,
                behavior: "smooth",
              });
            }
          });
        });
      });

      // Check anonymous user usage
      async function checkAnonymousUsage() {
        const counterElement = document.getElementById("checksRemaining");
        const usageCounter = document.getElementById("usageCounter");

        // Show loading state
        if (counterElement) {
          counterElement.textContent = "...";
        }

        // Get or create token ONCE
        const deviceToken = getOrCreateDeviceToken();

        // ALWAYS check with backend
        try {
          const response = await fetch(`${API_URL}/api/check-usage`, {
            method: "GET",
            headers: {
              "X-User-Token": deviceToken,
            },
          });

          if (response.ok) {
            const data = await response.json();

            const remaining =
              data.checks_remaining !== undefined ? data.checks_remaining : 3;

            if (counterElement) {
              counterElement.textContent = remaining;
            }

            usageCounter.innerHTML = `<span class="count" id="checksRemaining">${remaining}</span><span>free analyses today (100 invoices max)</span>`;

            // Show warnings
            const limitWarning = document.getElementById("limitWarning");
            if (remaining === 0) {
              limitWarning.innerHTML =
                '⚠️ You\'ve used all free checks today. Come back tomorrow or <a href="#" onclick="showAuthModal(\'signup\')" style="color: var(--secondary);">create an account</a>!';
              limitWarning.classList.add("active");
            } else if (remaining === 1) {
              limitWarning.textContent =
                "⚠️ You have 1 free check remaining today";
              limitWarning.classList.add("active");
            } else {
              limitWarning.classList.remove("active");
            }
          } else {
            console.error("Backend returned error:", response.status);
            if (counterElement) {
              counterElement.textContent = "3";
            }
            usageCounter.innerHTML =
              '<span class="count" id="checksRemaining">3</span><span>free analyses today (100 invoices max)</span>';
          }
        } catch (error) {
          console.error("Failed to check usage:", error);
          if (counterElement) {
            counterElement.textContent = "3";
          }
          usageCounter.innerHTML =
            '<span class="count" id="checksRemaining">3</span><span>free analyses today (100 invoices max)</span>';
        }

        return Promise.resolve();
      }

      // Also add debugging to processFile function:
      async function processFile(file) {
        const formData = new FormData();
        formData.append("file", file);

        console.log("=== PROCESS FILE START ===");

        try {
          const headers = {};
          if (authToken) {
            headers["Authorization"] = `Bearer ${authToken}`;
            console.log("Using auth token");
          } else {
            let deviceToken = localStorage.getItem("dupecheck_device_token");
            if (!deviceToken) {
              deviceToken =
                "anon_" +
                Math.random().toString(36).substring(2) +
                Date.now().toString(36);
              localStorage.setItem("dupecheck_device_token", deviceToken);
              console.log("Generated new token for processing:", deviceToken);
            }
            headers["X-User-Token"] = deviceToken;
            console.log("Sending anonymous token:", deviceToken);
          }

          const response = await fetch(`${API_URL}/api/analyze`, {
            method: "POST",
            headers: headers,
            body: formData,
          });

          console.log("Analyze response status:", response.status);

          if (!response.ok) {
            const error = await response.json();
            console.error("Analyze error:", error);
            throw new Error(error.detail || "Analysis failed");
          }

          const data = await response.json();
          console.log(
            "Analysis complete, checks remaining:",
            data.checks_remaining
          );

          // Complete progress
          updateProgress(100, "Complete!");

          // Short delay to show completion
          setTimeout(() => {
            document
              .getElementById("loadingOverlay")
              .classList.remove("active");
            displayResults(data);
          }, 500);
        } catch (error) {
          console.error("Process file error:", error);
          document.getElementById("loadingOverlay").classList.remove("active");
          customAlert(error.message, "error");

          if (error.message.includes("Daily limit reached")) {
            setTimeout(() => {
              showAuthModal("signup");
            }, 1500);
          }
        }

        console.log("=== PROCESS FILE END ===");
      }

      // Auth functions
      function showAuthModal(mode) {
        authMode = mode;
        document.getElementById("authModal").classList.add("active");
        switchAuthTab(mode);
      }

      function closeAuthModal() {
        document.getElementById("authModal").classList.remove("active");
        document.getElementById("authError").classList.remove("active");
        document.getElementById("authSuccess").classList.remove("active");
      }

      function switchAuthTab(mode) {
        authMode = mode;
        const loginTab = document.getElementById("loginTab");
        const signupTab = document.getElementById("signupTab");
        const buttonText = document.getElementById("authButtonText");

        if (mode === "login") {
          loginTab.classList.add("active");
          signupTab.classList.remove("active");
          buttonText.textContent = "Login";
        } else {
          loginTab.classList.remove("active");
          signupTab.classList.add("active");
          buttonText.textContent = "Sign Up";
        }
      }

      async function handleAuth(event) {
        event.preventDefault();

        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        const errorDiv = document.getElementById("authError");
        const successDiv = document.getElementById("authSuccess");

        errorDiv.classList.remove("active");
        successDiv.classList.remove("active");

        // Validate password for signup
        if (authMode === "signup" && password.length < 6) {
          errorDiv.textContent = "Password must be at least 6 characters long";
          errorDiv.classList.add("active");
          return;
        }

        try {
          const endpoint =
            authMode === "login" ? "/api/auth/login" : "/api/auth/signup";
          const response = await fetch(`${API_URL}${endpoint}`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ email, password }),
          });

          const data = await response.json();

          if (!response.ok) {
            throw new Error(data.detail || "Authentication failed");
          }

          if (authMode === "login") {
            // Login flow - store token and log in
            authToken = data.access_token;
            localStorage.setItem("dupecheck_token", authToken);
            localStorage.setItem("dupecheck_email", email);

            // Update user info
            currentUser = {
              email: email,
              subscription_tier: data.subscription_tier,
              checks_remaining: data.checks_remaining,
            };

            // Clear any existing warning messages
            clearWarningMessages();

            successDiv.textContent = "Login successful!";
            successDiv.classList.add("active");

            setTimeout(() => {
              closeAuthModal();
              updateUI();
            }, 1500);
          } else {
            // Signup flow - show verification message
            successDiv.innerHTML = `
              <div style="text-align: center; padding: 20px;">
                <h3 style="color: #57f287; margin-bottom: 15px;">✅ Account Created Successfully!</h3>
                <p style="margin-bottom: 15px;">Please check your email and click the verification link to activate your account.</p>
                <p style="font-size: 14px; color: #666;">You'll be automatically logged in once you verify your email.</p>
              </div>
            `;
            successDiv.classList.add("active");

            // Clear the form
            document.getElementById("email").value = "";
            document.getElementById("password").value = "";

            // Close modal after 3 seconds
            setTimeout(() => {
              closeAuthModal();
            }, 3000);
          }
        } catch (error) {
          errorDiv.textContent = error.message;
          errorDiv.classList.add("active");
        }
      }

      // Email verification handling
      async function handleEmailVerification(token) {
        try {
          const response = await fetch(`${API_URL}/api/auth/verify-email`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ token }),
          });

          const data = await response.json();

          if (!response.ok) {
            throw new Error(data.detail || "Verification failed");
          }

          // Store token and log in
          authToken = data.access_token;
          localStorage.setItem("dupecheck_token", authToken);
          localStorage.setItem(
            "dupecheck_email",
            data.email || "user@example.com"
          );

          // Update user info
          currentUser = {
            email: data.email || "user@example.com",
            subscription_tier: data.subscription_tier,
            checks_remaining: data.checks_remaining,
          };

          // Clear any existing warning messages
          clearWarningMessages();

          // Show success message
          customAlert(
            "Email verified successfully! You are now logged in.",
            "success"
          );

          // Update UI
          updateUI();

          // Remove verification token from URL
          const url = new URL(window.location);
          url.searchParams.delete("verify");
          window.history.replaceState({}, document.title, url.pathname);
        } catch (error) {
          customAlert(`Verification failed: ${error.message}`, "error");
        }
      }

      // Check for verification token in URL on page load
      function checkForVerificationToken() {
        const urlParams = new URLSearchParams(window.location.search);
        const verifyToken = urlParams.get("verify");

        if (verifyToken) {
          handleEmailVerification(verifyToken);
        }
      }

      async function checkAuth() {
        if (!authToken) return Promise.resolve();

        try {
          const response = await fetch(`${API_URL}/api/user/usage`, {
            headers: {
              Authorization: `Bearer ${authToken}`,
            },
          });

          if (!response.ok) {
            throw new Error("Invalid token");
          }

          const data = await response.json();
          currentUser = {
            subscription_tier: data.subscription_tier,
            checks_remaining: data.checks_remaining,
            can_analyze: data.can_analyze,
            email: localStorage.getItem("dupecheck_email"), // FIX: Always include email
          };
        } catch (error) {
          // Invalid token, clear it
          localStorage.removeItem("dupecheck_token");
          localStorage.removeItem("dupecheck_email");
          authToken = null;
          currentUser = null;
        }
      }

      function logout() {
        localStorage.removeItem("dupecheck_token");
        localStorage.removeItem("dupecheck_email");
        authToken = null;
        currentUser = null;
        // Refresh the page to reset everything
        window.location.reload();
      }

      function toggleUserDropdown() {
        const dropdown = document.getElementById("userDropdown");
        const userButton = document.getElementById("userButton");

        const isOpen = dropdown.classList.contains("active");

        if (isOpen) {
          dropdown.classList.remove("active");
          userButton.classList.remove("active");
          userButton.setAttribute("aria-expanded", "false");
        } else {
          dropdown.classList.add("active");
          userButton.classList.add("active");
          userButton.setAttribute("aria-expanded", "true");
        }
      }

      document.addEventListener("click", (e) => {
        const userMenu = document.getElementById("userMenu");
        if (userMenu && !userMenu.contains(e.target)) {
          const userDropdown = document.getElementById("userDropdown");
          if (userDropdown) {
            userDropdown.classList.remove("active");
          }
          const userButton = document.getElementById("userButton");
          if (userButton) {
            userButton.classList.remove("active");
            userButton.setAttribute("aria-expanded", "false");
          }
        }
      });

      function updateUI() {
        const authButtons = document.getElementById("authButtons");
        const userMenu = document.getElementById("userMenu");
        const usageCounter = document.getElementById("usageCounter");

        if (currentUser) {
          authButtons.style.display = "none";
          userMenu.style.display = "flex"; // Changed from "block" to "flex"

          // Get email from currentUser object OR localStorage
          const email =
            currentUser.email ||
            localStorage.getItem("dupecheck_email") ||
            "User";

          // Create avatar initials from email
          const initials = email.substring(0, 2).toUpperCase();
          document.getElementById("userAvatar").textContent = initials;

          // Set email
          document.getElementById("userEmail").textContent =
            email.length > 20 ? email.substring(0, 20) + "..." : email;

          // Show loading state for user credits in dropdown
          document.getElementById("userCredits").textContent = "loading...";
          document.getElementById("userCredits").style.opacity = "0.6";

          // Show loading state instead of default text
          usageCounter.innerHTML = `
            <span class="count" style="opacity: 0.6;">...</span>
            <span>loading...</span>
          `;
          usageCounter.style.display = "flex";

          // Clear any existing warnings since user is logged in
          clearWarningMessages();

          // Fetch and display credit balance
          fetchCreditBalance();
        } else {
          authButtons.style.display = "flex";
          authButtons.style.gap = "1rem";
          userMenu.style.display = "none";
          usageCounter.style.display = "flex";
        }
      }

      // File upload handling
      const uploadArea = document.getElementById("uploadArea");
      const fileInput = document.getElementById("fileInput");

      uploadArea.addEventListener("dragover", (e) => {
        e.preventDefault();
        uploadArea.classList.add("dragging");
      });

      uploadArea.addEventListener("dragleave", () => {
        uploadArea.classList.remove("dragging");
      });

      uploadArea.addEventListener("drop", (e) => {
        e.preventDefault();
        uploadArea.classList.remove("dragging");
        const files = e.dataTransfer.files;
        if (files.length > 0) {
          handleFile(files[0]);
        }
      });

      fileInput.addEventListener("change", (e) => {
        if (e.target.files.length > 0) {
          // Enable the analyze button when files are selected
          const analyzeBtn = document.getElementById("analyzeBtn");
          if (analyzeBtn) {
            analyzeBtn.disabled = false;
            analyzeBtn.textContent = "Analyze for Duplicates";
          }

          // Update upload area to show selected file
          const uploadArea = document.getElementById("uploadArea");
          if (uploadArea) {
            uploadArea.innerHTML = `
              <div class="upload-icon">✅</div>
              <h3>File Selected: ${e.target.files[0].name}</h3>
              <p>Click "Analyze for Duplicates" to start processing</p>
            `;
          }
        }
      });

      // Make upload area clickable
      uploadArea.addEventListener("click", (e) => {
        e.preventDefault();
        fileInput.click();
      });

      // Function to handle the analyze button click
      function analyzeFiles() {
        const fileInput = document.getElementById("fileInput");
        if (fileInput.files.length > 0) {
          handleFile(fileInput.files[0]);
        } else {
          // Trigger file input if no files selected
          fileInput.click();
        }
      }

      async function handleFile(file) {
        uploadedFile = file;

        // Enable the analyze button
        const analyzeBtn = document.getElementById("analyzeBtn");
        if (analyzeBtn) {
          analyzeBtn.disabled = false;
          analyzeBtn.textContent = "Analyze for Duplicates";
        }

        // Reset and show loading with progress
        document.getElementById("loadingOverlay").classList.add("active");
        updateProgress(0, "Uploading file...");

        // Start progress animation
        simulateProgress(file);

        // Process file
        await processFile(file);
      }

      function updateProgress(percent, text) {
        document.getElementById("progressBar").style.width = percent + "%";
        document.getElementById("progressText").textContent = text;
      }

      function simulateProgress(file) {
        // Estimate time based on file size (rough estimate)
        const fileSizeMB = file.size / (1024 * 1024);
        const estimatedTime = Math.min(Math.max(fileSizeMB * 2, 3), 15) * 1000; // 3-15 seconds

        const stages = [
          { percent: 10, text: "Uploading file...", time: 0.1 },
          { percent: 25, text: "Reading invoice data...", time: 0.2 },
          { percent: 40, text: "Parsing records...", time: 0.3 },
          { percent: 60, text: "Analyzing duplicates...", time: 0.5 },
          { percent: 80, text: "Calculating matches...", time: 0.7 },
          { percent: 95, text: "Generating report...", time: 0.9 },
        ];

        stages.forEach((stage) => {
          setTimeout(() => {
            // Only update if still loading
            if (
              document
                .getElementById("loadingOverlay")
                .classList.contains("active")
            ) {
              updateProgress(stage.percent, stage.text);
            }
          }, estimatedTime * stage.time);
        });
      }

      async function processFile(file) {
        const formData = new FormData();
        formData.append("file", file);

        try {
          const headers = {};
          if (authToken) {
            headers["Authorization"] = `Bearer ${authToken}`;
          } else {
            // Use the same function to get token
            const deviceToken = getOrCreateDeviceToken();
            headers["X-User-Token"] = deviceToken;
          }

          const response = await fetch(`${API_URL}/api/analyze`, {
            method: "POST",
            headers: headers,
            body: formData,
          });

          if (!response.ok) {
            const error = await response.json();
            console.error("Analyze error:", error);
            throw new Error(error.detail || "Analysis failed");
          }

          const data = await response.json();

          // Complete progress
          updateProgress(100, "Complete!");

          // Short delay to show completion
          setTimeout(() => {
            document
              .getElementById("loadingOverlay")
              .classList.remove("active");
            displayResults(data);
          }, 500);
        } catch (error) {
          document.getElementById("loadingOverlay").classList.remove("active");
          customAlert(error.message, "error");

          if (error.message.includes("used your 3 free daily analyses")) {
            setTimeout(() => {
              showAuthModal("signup");
            }, 1500);
          }
        }
      }

      function displayResults(data) {
        analysisResults = data; // Store globally for later use

        document.getElementById("resultsCard").classList.add("active");

        // Show summary stats
        document.getElementById("totalInvoices").textContent =
          data.total_invoices;
        document.getElementById("duplicatesFound").textContent =
          data.duplicates_found;
        document.getElementById("potentialSavings").textContent =
          "$" +
          data.potential_savings
            .toFixed(2)
            .replace(/\B(?=(\d{3})+(?!\d))/g, ",");

        const duplicatesList = document.getElementById("duplicatesList");

        if (data.duplicates_found > 0) {
          // The backend only sends summary data, not full invoice details
          duplicatesList.innerHTML = `
            <h3 style="margin-bottom: 1rem;">Top ${Math.min(
              5,
              data.duplicates_found
            )} High-Value Duplicates</h3>
        `;

          // Check if we have duplicates array with data
          if (data.duplicates && data.duplicates.length > 0) {
            data.duplicates.forEach((dup, i) => {
              const item = document.createElement("div");
              item.style.cssText =
                "background: var(--bg-dark); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;";
              item.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>Duplicate #${i + 1}</strong>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">
                                Amount: $${dup.potential_savings.toFixed(2)} • 
                                Confidence: ${Math.round(
                                  dup.confidence_score
                                )}%<span class="confidence-help-icon" onclick="showConfidenceTooltip()" title="Learn about confidence scores">?</span>
                            </div>
                            ${
                              dup.match_reasons && dup.match_reasons.length > 0
                                ? `
                                <div style="color: var(--text-secondary); font-size: 0.85rem; margin-top: 0.25rem;">
                                    ${dup.match_reasons.join(" • ")}
                                </div>
                            `
                                : ""
                            }
                        </div>
                        <span style="color: var(--danger);">⚠️</span>
                    </div>
                `;
              duplicatesList.appendChild(item);
            });
          }

          // Add summary message if there are more than 5 duplicates
          if (data.duplicates_found > 5) {
            const msg = document.createElement("div");
            msg.style.cssText =
              "text-align: center; margin-top: 1.5rem; padding: 1rem; background: var(--bg-dark); border-radius: 8px;";
            msg.innerHTML = `
                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    Showing top 5 of ${data.duplicates_found} duplicates by value
                </p>
                <p style="color: var(--warning); font-weight: 600;">
                    Download the full report below to see all duplicates
                </p>
            `;
            duplicatesList.appendChild(msg);
          }

          // Show upgrade prompt for non-logged in users
          if (!currentUser && data.duplicates_found > 0) {
            setTimeout(() => {
              const msg = document.createElement("div");
              msg.className = "alert alert-success active";
              msg.style.marginTop = "1rem";
              msg.innerHTML = `
                    Found ${data.duplicates_found} duplicates! 
                    <a href="#" onclick="showAuthModal('signup')" style="color: var(--secondary); text-decoration: underline;">
                        Create an account
                    </a> to save your analysis and get more checks.
                `;
              duplicatesList.appendChild(msg);
            }, 500);
          }
        } else {
          duplicatesList.innerHTML = `
            <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                <div style="font-size: 3rem; margin-bottom: 1rem;">✅</div>
                <h3>No duplicates found!</h3>
                <p>Your invoices look clean</p>
            </div>
        `;
        }

        // Add educational content based on results
        addEducationalContent(data);

        // Scroll to results
        setTimeout(() => {
          const resultsCard = document.getElementById("resultsCard");
          const navHeight = document.querySelector("nav").offsetHeight;
          const targetPosition = resultsCard.offsetTop - navHeight - 20;

          window.scrollTo({
            top: targetPosition,
            behavior: "smooth",
          });
        }, 100);

        // UPDATE USAGE COUNTER FOR ANONYMOUS USERS
        if (!currentUser && data.checks_remaining !== undefined) {
          document.getElementById("checksRemaining").textContent =
            data.checks_remaining;

          const limitWarning = document.getElementById("limitWarning");
          if (data.checks_remaining === 0) {
            limitWarning.innerHTML =
              '⚠️ You\'ve used all 3 free checks today. <a href="#" onclick="showAuthModal(\'signup\')" style="color: var(--secondary);">Create an account</a> for more!';
            limitWarning.classList.add("active");
          } else if (data.checks_remaining === 1) {
            limitWarning.textContent =
              "⚠️ You have 1 free check remaining today";
            limitWarning.classList.add("active");
          }
        }

        // Update credit balance if logged in
        if (currentUser) {
          fetchCreditBalance();
        }
      }
      async function downloadReport(format = "pdf") {
        if (!analysisResults) return;

        // For ALL formats, use the prepare-download endpoint to get full data
        try {
          const headers = {};
          if (authToken) {
            headers["Authorization"] = `Bearer ${authToken}`;
          }

          const response = await fetch(
            `${API_URL}/api/analyze/prepare-download?analysis_id=${analysisResults.analysis_id}&format=${format}`,
            {
              method: "POST",
              headers: headers,
            }
          );

          if (!response.ok) {
            throw new Error(`Failed to generate ${format.toUpperCase()}`);
          }

          const blob = await response.blob();
          const url = window.URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;

          // Set appropriate extension
          let extension;
          if (format === "pdf") extension = "pdf";
          else if (format === "excel") extension = "xlsx";
          else if (format === "text") extension = "txt";

          a.download = `dupecheck-report-${Date.now()}.${extension}`;
          a.click();
          window.URL.revokeObjectURL(url);
        } catch (error) {
          console.error(`${format.toUpperCase()} generation error:`, error);
          customAlert(`Failed to generate ${format.toUpperCase()}`, "error");
        }
      }

      async function downloadTextReport() {
        if (!analysisResults) return;

        // For logged-in users or if we have an analysis_id, fetch full data
        if (analysisResults.analysis_id) {
          try {
            const headers = {};
            if (authToken) {
              headers["Authorization"] = `Bearer ${authToken}`;
            }

            // Fetch full report data from backend
            const response = await fetch(
              `${API_URL}/api/analyze/prepare-download?analysis_id=${analysisResults.analysis_id}&format=text`,
              {
                method: "POST",
                headers: headers,
              }
            );

            if (!response.ok) {
              throw new Error("Failed to fetch full report");
            }

            const blob = await response.blob();
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = `dupecheck-report-${Date.now()}.txt`;
            a.click();
            window.URL.revokeObjectURL(url);
            return;
          } catch (error) {
            console.error(
              "Failed to get full text report, falling back to summary"
            );
          }
        }

        // Fallback: Build report from available data
        let duplicateDetails = "";
        if (
          analysisResults.duplicates &&
          analysisResults.duplicates.length > 0
        ) {
          duplicateDetails = analysisResults.duplicates
            .map(
              (dup, i) => `
Duplicate #${i + 1}
Confidence: ${Math.round(dup.confidence_score)}%
Amount: $${dup.potential_savings.toFixed(2)}
Reasons: ${dup.match_reasons ? dup.match_reasons.join(", ") : "N/A"}
`
            )
            .join("\n");
        } else {
          duplicateDetails = "No duplicate details available in summary view.";
        }

        const report = `DupeCheck Analysis Report
Generated: ${new Date().toLocaleString()}

SUMMARY
=======
Total Invoices: ${analysisResults.total_invoices}
Duplicates Found: ${analysisResults.duplicates_found}
Potential Savings: $${analysisResults.potential_savings.toFixed(2)}

DUPLICATE DETAILS
=================
${duplicateDetails}

Note: This report shows summary data only. Download Excel or PDF for full details.

---
Analyzed by DupeCheck
Visit dupecheck.forgeapis.com for more
`;

        const blob = new Blob([report], { type: "text/plain" });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = `dupecheck-report-${Date.now()}.txt`;
        a.click();
        window.URL.revokeObjectURL(url);
      }

      function viewHistory() {
        showModal({
          type: "info",
          title: "Coming Soon",
          message:
            "Analysis history feature is under development. You'll be able to view all your past analyses here soon!",
        });
        toggleUserDropdown();
      }

      async function upgrade(plan) {
        if (!authToken) {
          showModal({
            type: "warning",
            title: "Login Required",
            message: "Please create an account or login to purchase credits",
            okText: "Login",
            onOk: () => showAuthModal("login"),
          });
          return;
        }

        // Map plan names to package names for the API
        const packageMap = {
          starter: "starter",
          professional: "professional",
          business: "business",
        };

        const packageName = packageMap[plan];

        // Debug logging
        console.log("Plan requested:", plan);
        console.log("Package name being sent:", packageName);

        if (plan === "business") {
          showModal({
            type: "info",
            title: "Business Plan",
            message:
              "The Business subscription plan is coming soon. For now, try our credit packages!",
          });
          return;
        }

        // Show loading
        showModal({
          type: "info",
          title: "Redirecting to checkout...",
          message: "Please wait while we prepare your secure checkout session",
          hideOkButton: true,
        });

        try {
          const requestBody = { package: packageName };
          console.log("Request body:", JSON.stringify(requestBody));
          console.log("Auth token exists:", !!authToken);

          const response = await fetch(`${API_URL}/api/credits/checkout`, {
            method: "POST",
            headers: {
              Authorization: `Bearer ${authToken}`,
              "Content-Type": "application/json",
            },
            body: JSON.stringify(requestBody),
          });

          console.log("Response status:", response.status);

          const responseText = await response.text();
          console.log("Raw response:", responseText);

          let data;
          try {
            data = JSON.parse(responseText);
          } catch (e) {
            console.error("Failed to parse response as JSON:", e);
            throw new Error("Invalid response from server");
          }

          if (!response.ok) {
            console.error("Error response:", data);
            throw new Error(data.detail || "Failed to create checkout session");
          }

          // Close the loading modal before redirecting
          closeModal();

          // Redirect to Stripe Checkout
          window.location.href = data.checkout_url;
        } catch (error) {
          console.error("Full error:", error);
          closeModal();
          setTimeout(() => {
            showModal({
              type: "error",
              title: "Checkout Error",
              message:
                error.message || "Failed to start checkout. Please try again.",
            });
          }, 100);
        }
      }

      async function updateUserDropdown() {
        const dropdown = document.getElementById("userDropdown");

        try {
          const response = await fetch(`${API_URL}/api/credits/balance`, {
            headers: { Authorization: `Bearer ${authToken}` },
          });

          const data = await response.json();

          dropdown.innerHTML = `
            <a href="#pricingSection" onclick="toggleUserDropdown()">
                ${data.balance > 0 ? "Buy More Credits" : "Get Credits"}
            </a>
            <div style="border-top: 1px solid var(--border); margin: 0.5rem 0;"></div>
            <button onclick="logout()">Sign Out</button>
        `;
        } catch (error) {
          dropdown.innerHTML = `
            <a href="#pricingSection" onclick="toggleUserDropdown()">Get Credits</a>
            <div style="border-top: 1px solid var(--border); margin: 0.5rem 0;"></div>
            <button onclick="logout()">Sign Out</button>
        `;
        }
      }

      // Test function to add credits (replace with Stripe later)
      async function buyCredits(package) {
        try {
          const response = await fetch(`${API_URL}/api/credits/add`, {
            method: "POST",
            headers: {
              Authorization: `Bearer ${authToken}`,
              "Content-Type": "application/json",
            },
          });

          if (response.ok) {
            const data = await response.json();
            showModal({
              type: "success",
              title: "Credits Added!",
              message: `Successfully added ${data.credits_added} credits. New balance: ${data.new_balance}`,
            });
            fetchCreditBalance();
          }
        } catch (error) {
          customAlert("Failed to add credits", "error");
        }
      }

      // Close dropdown when clicking outside
      async function testCreditPurchase() {
        if (!authToken) {
          customAlert("Please login first", "warning");
          return;
        }

        try {
          const response = await fetch(`${API_URL}/api/credits/add`, {
            method: "POST",
            headers: {
              Authorization: `Bearer ${authToken}`,
              "Content-Type": "application/json",
            },
          });

          if (response.ok) {
            const data = await response.json();
            document.getElementById(
              "creditTestResult"
            ).innerHTML = `✅ Added ${data.credits_added} credits! New balance: ${data.new_balance}`;
            fetchCreditBalance();
          } else {
            const error = await response.json();
            document.getElementById(
              "creditTestResult"
            ).innerHTML = `❌ Error: ${error.detail}`;
          }
        } catch (error) {
          document.getElementById(
            "creditTestResult"
          ).innerHTML = `❌ Error: ${error.message}`;
        }
      }

      // UPDATE YOUR fetchCreditBalance FUNCTION to show credits instead of tiers:

      async function fetchCreditBalance() {
        if (!authToken) return;

        try {
          const response = await fetch(`${API_URL}/api/credits/balance`, {
            headers: {
              Authorization: `Bearer ${authToken}`,
            },
          });

          if (response.ok) {
            const data = await response.json();
            const counterElement = document.getElementById("usageCounter");
            const creditsElement = document.getElementById("userCredits");

            if (data.balance > 0) {
              // User has PAID credits
              counterElement.innerHTML = `
                    <span class="count" style="color: var(--secondary);">${data.balance}</span>
                    <span>credits • <strong>2,500 invoices/file</strong></span>
                `;

              creditsElement.textContent = `${data.balance} credits remaining`;
              creditsElement.className = "user-credits has-credits";
              creditsElement.style.opacity = "1";
            } else {
              // No credits - check free tier usage
              const usageResponse = await fetch(`${API_URL}/api/user/usage`, {
                headers: {
                  Authorization: `Bearer ${authToken}`,
                },
              });

              if (usageResponse.ok) {
                const usageData = await usageResponse.json();
                const remaining = usageData.checks_remaining || 0;

                counterElement.innerHTML = `
                        <span class="count">${remaining}</span>
                        <span>free today • <strong style="color: var(--warning);">100 invoices max</strong></span>
                    `;

                if (remaining > 0) {
                  creditsElement.textContent = `${remaining} free checks today`;
                  creditsElement.className = "user-credits";
                } else {
                  creditsElement.textContent = "No checks remaining";
                  creditsElement.className = "user-credits";
                }
                creditsElement.style.opacity = "1";
              }
            }

            // Show the usage counter now that we have real data
            counterElement.style.display = "flex";
          }
        } catch (error) {
          console.error("Failed to fetch credit balance:", error);
          const creditsElement = document.getElementById("userCredits");
          creditsElement.textContent = "Free tier";
          creditsElement.style.opacity = "1";
          // Show usage counter even on error to avoid blank space
          document.getElementById("usageCounter").style.display = "flex";
        }
      }

      // Also update the CSS for the new badge styles:

      function showAllDuplicates() {
        if (!analysisResults || !analysisResults.duplicates) return;

        const duplicates = analysisResults.duplicates;

        let duplicatesHTML = `
        <div style="max-height: 500px; overflow-y: auto;">
    `;

        duplicates.forEach((dup, index) => {
          const vendor1 =
            dup.invoice1.vendor || dup.invoice1.Vendor || "Unknown";
          const vendor2 =
            dup.invoice2.vendor || dup.invoice2.Vendor || "Unknown";
          const invoice1Num =
            dup.invoice1.invoice_number ||
            dup.invoice1["Invoice Number"] ||
            "N/A";
          const invoice2Num =
            dup.invoice2.invoice_number ||
            dup.invoice2["Invoice Number"] ||
            "N/A";

          duplicatesHTML += `
            <div style="background: var(--bg-dark); border: 1px solid var(--border); border-radius: 8px; padding: 16px; margin-bottom: 12px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <h4 style="margin: 0; color: var(--primary);">Duplicate Set #${
                      index + 1
                    }</h4>
                    <span style="background: ${
                      dup.confidence_score >= 80
                        ? "#57f287"
                        : dup.confidence_score >= 60
                        ? "#fee75c"
                        : "#ed4245"
                    }; 
                                 color: var(--bg-dark); padding: 4px 12px; border-radius: 12px; font-weight: 600; font-size: 0.9rem;">
                        ${Math.round(
                          dup.confidence_score
                        )}% confidence<span class="confidence-help-icon" onclick="showConfidenceTooltip()" title="Learn about confidence scores" style="margin-left: 6px;">?</span>
                    </span>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 8px;">
                    <div style="background: var(--bg-card); padding: 8px; border-radius: 4px;">
                        <div style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 4px;">Invoice 1</div>
                        <div><strong>Vendor:</strong> ${vendor1}</div>
                        <div><strong>Amount:</strong> $${dup.potential_savings.toFixed(
                          2
                        )}</div>
                        <div><strong>Invoice #:</strong> ${invoice1Num}</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 8px; border-radius: 4px;">
                        <div style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 4px;">Invoice 2</div>
                        <div><strong>Vendor:</strong> ${vendor2}</div>
                        <div><strong>Amount:</strong> $${dup.potential_savings.toFixed(
                          2
                        )}</div>
                        <div><strong>Invoice #:</strong> ${invoice2Num}</div>
                    </div>
                </div>
                
                <div style="color: var(--text-secondary); font-size: 0.9rem;">
                    <strong>Match reasons:</strong> ${dup.match_reasons.join(
                      " • "
                    )}
                </div>
            </div>
        `;
        });

        duplicatesHTML += "</div>";

        // Show in modal
        showDuplicatesModal(duplicatesHTML, duplicates.length);
      }

      function showDuplicatesModal(content, totalCount) {
        const modal = document.createElement("div");
        modal.className = "custom-modal active";
        modal.innerHTML = `
        <div class="custom-modal-content" style="max-width: 800px;">
            <div class="custom-modal-header">
                <div class="custom-modal-icon warning">
                    <span>🔍</span>
                </div>
                <h3 class="custom-modal-title">All ${totalCount} Duplicate Sets Found</h3>
            </div>
            <div style="margin: 20px 0;">
                ${content}
            </div>
            <div style="margin: 16px 0; padding: 12px; background: var(--bg-dark); border-radius: 8px; text-align: center;">
                <strong style="color: var(--secondary);">Total Potential Savings: $${analysisResults.potential_savings.toFixed(
                  2
                )}</strong>
            </div>
            <div class="custom-modal-footer">
                <button class="custom-modal-btn custom-modal-btn-secondary" onclick="downloadReport('pdf')">
                    📄 Download PDF
                </button>
                <button class="custom-modal-btn custom-modal-btn-primary" onclick="this.closest('.custom-modal').remove()">
                    Close
                </button>
            </div>
        </div>
    `;
        document.body.appendChild(modal);

        modal.onclick = (e) => {
          if (e.target === modal) {
            modal.remove();
          }
        };
      }

      // Add this new function
      function showPasswordResetModal(token) {
        const modal = document.createElement("div");
        modal.className = "modal active";
        modal.innerHTML = `
        <div class="modal-content">
            <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
            <h2 style="color: var(--primary); margin-bottom: 1rem;">Reset Your Password</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                Enter your new password below. It must be at least 6 characters long.
            </p>
            <form onsubmit="handlePasswordReset(event, '${token}')">
                <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" required minlength="6" 
                           placeholder="Enter new password">
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" required minlength="6"
                           placeholder="Confirm new password">
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    Reset Password
                </button>
            </form>
            <div class="alert alert-error" id="resetError"></div>
            <div class="alert alert-success" id="resetSuccess"></div>
        </div>
    `;
        document.body.appendChild(modal);

        // Focus on first input
        setTimeout(() => {
          document.getElementById("newPassword").focus();
        }, 100);
      }

      function scrollToUpload() {
        const uploadCard = document.querySelector(".upload-card");
        if (uploadCard) {
          const navHeight = document.querySelector("nav").offsetHeight;
          const targetPosition = uploadCard.offsetTop - navHeight - 20;
          window.scrollTo({
            top: targetPosition,
            behavior: "smooth",
          });
        }
      }

      async function handlePasswordReset(event, token) {
        event.preventDefault();

        const newPassword = document.getElementById("newPassword").value;
        const confirmPassword =
          document.getElementById("confirmPassword").value;
        const errorDiv = document.getElementById("resetError");
        const successDiv = document.getElementById("resetSuccess");

        // Clear previous messages
        errorDiv.classList.remove("active");
        successDiv.classList.remove("active");

        if (newPassword !== confirmPassword) {
          errorDiv.textContent = "Passwords don't match. Please try again.";
          errorDiv.classList.add("active");
          return;
        }

        if (newPassword.length < 6) {
          errorDiv.textContent = "Password must be at least 6 characters long.";
          errorDiv.classList.add("active");
          return;
        }

        // Show loading state
        const submitButton = event.target.querySelector(
          'button[type="submit"]'
        );
        const originalText = submitButton.textContent;
        submitButton.textContent = "Resetting...";
        submitButton.disabled = true;

        try {
          const response = await fetch(`${API_URL}/api/auth/reset-password`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              token: token,
              password: newPassword,
            }),
          });

          if (!response.ok) {
            const error = await response.json();
            throw new Error(error.detail || "Reset failed");
          }

          // Success
          successDiv.textContent =
            "Password reset successfully! Redirecting to login...";
          successDiv.classList.add("active");

          // Close modal and show login after delay
          setTimeout(() => {
            document.querySelector(".modal.active").remove();
            showAuthModal("login");

            // Show success message in login modal
            setTimeout(() => {
              const authSuccess = document.getElementById("authSuccess");
              authSuccess.textContent =
                "Password reset successful! You can now login with your new password.";
              authSuccess.classList.add("active");
            }, 100);
          }, 2000);
        } catch (error) {
          errorDiv.textContent = error.message;
          errorDiv.classList.add("active");
          submitButton.textContent = originalText;
          submitButton.disabled = false;
        }
      }
      function showForgotPassword(event) {
        if (event && event.preventDefault) {
          event.preventDefault();
        }

        closeAuthModal();

        // Create a custom modal with email input
        const modal = document.createElement("div");
        modal.className = "modal active";
        modal.innerHTML = `
          <div class="modal-content">
            <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
            <div style="display: flex; align-items: center; margin-bottom: 1rem;">
              <div style="
                width: 24px;
                height: 24px;
                background: var(--primary);
                border-radius: 4px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 12px;
                flex-shrink: 0;
              ">
                <span style="color: white; font-weight: bold; font-size: 14px;">i</span>
              </div>
              <h2 style="color: var(--primary); margin: 0; font-size: 1.2rem;">Reset Password</h2>
            </div>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem; line-height: 1.5;">
              Enter your email address and we'll send you a password reset link.
            </p>
            <input 
              type="email" 
              id="forgotPasswordEmail" 
              placeholder="Enter your email address"
              style="
                width: 100%;
                padding: 0.75rem;
                border: 1px solid var(--border);
                border-radius: 6px;
                background: var(--bg-dark);
                color: var(--text-primary);
                font-size: 0.9rem;
                margin-bottom: 1.5rem;
                box-sizing: border-box;
              "
              required
            />
            <div style="display: flex; gap: 0.75rem; justify-content: flex-end;">
              <button 
                type="button" 
                onclick="this.closest('.modal').remove()"
                style="
                  padding: 0.75rem 1.5rem;
                  background: var(--bg-card);
                  color: var(--text-primary);
                  border: 1px solid var(--border);
                  border-radius: 6px;
                  cursor: pointer;
                  font-size: 0.9rem;
                "
              >
                Cancel
              </button>
              <button 
                type="button" 
                id="sendResetBtn"
                style="
                  padding: 0.75rem 1.5rem;
                  background: var(--primary);
                  color: white;
                  border: none;
                  border-radius: 6px;
                  cursor: pointer;
                  font-size: 0.9rem;
                "
              >
                Send Reset Link
              </button>
            </div>
            <div class="alert alert-error" id="resetError" style="display: none; margin-top: 1rem;"></div>
          </div>
        `;

        document.body.appendChild(modal);

        // Focus on email input
        setTimeout(() => {
          const emailInput = document.getElementById("forgotPasswordEmail");
          if (emailInput) {
            emailInput.focus();
          }
        }, 100);

        // Handle send button click
        document.getElementById("sendResetBtn").onclick = async () => {
          const email = document
            .getElementById("forgotPasswordEmail")
            .value.trim();
          const errorDiv = document.getElementById("resetError");
          const sendBtn = document.getElementById("sendResetBtn");

          if (!email) {
            errorDiv.textContent = "Please enter your email address.";
            errorDiv.style.display = "block";
            return;
          }

          // Show loading state
          const originalText = sendBtn.textContent;
          sendBtn.textContent = "Sending...";
          sendBtn.disabled = true;
          errorDiv.style.display = "none";

          try {
            const response = await fetch(
              `${API_URL}/api/auth/forgot-password`,
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ email }),
              }
            );

            if (!response.ok) {
              throw new Error("Request failed");
            }

            // Close modal and show success
            modal.remove();
            showModal({
              type: "success",
              title: "Check Your Email",
              message:
                "If an account exists with that email, we've sent a password reset link. Please check your inbox and spam folder.",
            });
          } catch (error) {
            errorDiv.textContent =
              error.message || "Failed to send reset link. Please try again.";
            errorDiv.style.display = "block";
            sendBtn.textContent = originalText;
            sendBtn.disabled = false;
          }
        };

        // Handle Enter key in email input
        document.getElementById("forgotPasswordEmail").onkeypress = (e) => {
          if (e.key === "Enter") {
            document.getElementById("sendResetBtn").click();
          }
        };
      }

      // FAQ accordion functionality
      function toggleFAQ(button) {
        const faqItem = button.parentElement;
        const isActive = faqItem.classList.contains("active");

        // Close all other FAQ items
        document.querySelectorAll(".faq-item").forEach((item) => {
          item.classList.remove("active");
        });

        // Toggle current item
        if (!isActive) {
          faqItem.classList.add("active");
        }
      }

      // Best practices guide toggle functionality
      function toggleBestPractices() {
        const guide = document.querySelector(".best-practices-guide");
        const button = document.querySelector(
          ".best-practices-toggle span:first-child"
        );

        guide.classList.toggle("expanded");

        if (guide.classList.contains("expanded")) {
          button.textContent = "Hide Best Practices Guide";
        } else {
          button.textContent = "Show Best Practices Guide";
        }
      }

      // Beta tooltip functionality
      function toggleBetaTooltip() {
        const tooltip = document.getElementById("betaTooltip");
        tooltip.classList.toggle("show");
      }

      function hideBetaTooltip() {
        const tooltip = document.getElementById("betaTooltip");
        tooltip.classList.remove("show");
      }

      // Close beta tooltip when clicking outside
      document.addEventListener("click", function (event) {
        const helpIcon = document.querySelector(".beta-help-icon");
        const tooltip = document.getElementById("betaTooltip");

        if (
          helpIcon &&
          tooltip &&
          !helpIcon.contains(event.target) &&
          !tooltip.contains(event.target)
        ) {
          tooltip.classList.remove("show");
        }
      });

      // Educational content function
      function addEducationalContent(data) {
        const resultsCard = document.getElementById("resultsCard");

        // Remove any existing educational content
        const existingEducation = resultsCard.querySelector(
          ".educational-content"
        );
        if (existingEducation) {
          existingEducation.remove();
        }

        // Create educational content container
        const educationDiv = document.createElement("div");

        if (data.duplicates_found > 0) {
          // Duplicates found - show investigation guidance
          educationDiv.className = "educational-content duplicates-found";
          educationDiv.innerHTML = `
            <h4>
              <span>🔍</span>
              What to do next with your duplicates
            </h4>
            <p>
              You've found ${data.duplicates_found} potential duplicate${
            data.duplicates_found > 1 ? "s" : ""
          } worth $${data.potential_savings
            .toFixed(2)
            .replace(
              /\B(?=(\d{3})+(?!\d))/g,
              ","
            )}. Here's how to investigate and resolve them:
            </p>
            <ul>
              <li><strong>Review each duplicate:</strong> Check the confidence scores and match reasons to understand why they were flagged</li>
              <li><strong>Verify with vendors:</strong> Contact suppliers to confirm if these are genuine duplicates or legitimate separate charges</li>
              <li><strong>Check your records:</strong> Cross-reference with purchase orders and approval workflows</li>
              <li><strong>Document decisions:</strong> Keep records of your investigation process and resolution steps</li>
              <li><strong>Process refunds:</strong> If confirmed as duplicates, request refunds or credits from vendors</li>
              <li><strong>Update systems:</strong> Mark duplicates in your accounting system to prevent future payments</li>
            </ul>
            <p>
              <strong>Pro tip:</strong> Start with the highest confidence scores (90%+) as these are most likely to be true duplicates.
            </p>
            <a href="#" class="learn-more-link" onclick="toggleBestPractices(); return false;">
              <span>📚</span>
              Learn more about duplicate prevention
            </a>
          `;
        } else {
          // No duplicates found - show maintenance tips
          educationDiv.className = "educational-content no-duplicates";
          educationDiv.innerHTML = `
            <h4>
              <span>✅</span>
              Great job! Keep your invoice process clean
            </h4>
            <p>
              No duplicates were found in your ${data.total_invoices} invoice${
            data.total_invoices > 1 ? "s" : ""
          }. Here are some tips to maintain this clean process:
            </p>
            <ul>
              <li><strong>Regular monitoring:</strong> Run duplicate checks monthly or quarterly to catch issues early</li>
              <li><strong>Vendor standardization:</strong> Keep consistent vendor names and avoid abbreviations in your system</li>
              <li><strong>Approval workflows:</strong> Implement multi-step approval processes for larger payments</li>
              <li><strong>Purchase order matching:</strong> Use three-way matching (PO, receipt, invoice) when possible</li>
              <li><strong>Staff training:</strong> Educate your team on duplicate prevention and recognition</li>
              <li><strong>System integration:</strong> Use integrated accounting systems to reduce manual data entry errors</li>
            </ul>
            <p>
              <strong>Pro tip:</strong> Set up automated alerts in your accounting system to flag potential duplicates before payment.
            </p>
            <a href="#" class="learn-more-link" onclick="toggleBestPractices(); return false;">
              <span>📚</span>
              Learn more about duplicate prevention
            </a>
          `;
        }

        // Insert educational content before download buttons
        const downloadSection = resultsCard.querySelector("div:last-child");
        if (downloadSection && downloadSection.querySelector(".btn")) {
          resultsCard.insertBefore(educationDiv, downloadSection);
        } else {
          resultsCard.appendChild(educationDiv);
        }
      }

      // Tools dropdown functionality
      document.addEventListener("DOMContentLoaded", function () {
        const dropdown = document.getElementById("toolsDropdown");
        const dropdownBtn = document.getElementById("toolsDropdownBtn");

        if (dropdown && dropdownBtn) {
          dropdownBtn.addEventListener("click", function (e) {
            e.stopPropagation();
            dropdown.classList.toggle("active");
          });

          // Close dropdown when clicking outside
          document.addEventListener("click", function (e) {
            if (!dropdown.contains(e.target)) {
              dropdown.classList.remove("active");
            }
          });
        }
      });
    </script>
  </body>
</html>

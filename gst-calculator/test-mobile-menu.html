<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mobile Menu Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f5f5f5;
      }
      .test-container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
      }
      .test-result {
        padding: 10px;
        margin: 5px 0;
        border-radius: 4px;
        font-weight: bold;
      }
      .pass {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .fail {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .info {
        background: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
      }
      button {
        background: #0066ff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background: #0052cc;
      }
      iframe {
        width: 100%;
        height: 600px;
        border: 1px solid #ccc;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <h1>üì± Mobile Menu Test</h1>

    <div class="test-container">
      <h2>Test Instructions</h2>
      <ol>
        <li>Open browser developer tools (F12)</li>
        <li>Switch to mobile view (responsive design mode)</li>
        <li>Set viewport to mobile size (e.g., 375x667)</li>
        <li>Look for the hamburger menu (three lines) in the top right</li>
        <li>Click the hamburger menu to test dropdown</li>
        <li>Check console for any error messages</li>
      </ol>
      <button onclick="runMobileMenuTest()">Run Mobile Menu Test</button>
      <div id="testResults">
        <div class="test-result info">
          Click "Run Mobile Menu Test" to check mobile menu functionality
        </div>
      </div>
    </div>

    <div class="test-container">
      <h2>Live Calculator (Mobile View)</h2>
      <p>Resize your browser to mobile width to see the hamburger menu:</p>
      <iframe src="index.html" id="calculatorFrame"></iframe>
    </div>

    <script>
      function runMobileMenuTest() {
        const resultsDiv = document.getElementById("testResults");
        resultsDiv.innerHTML =
          '<div class="test-result info">Running mobile menu test...</div>';

        try {
          const iframe = document.getElementById("calculatorFrame");
          const iframeDoc =
            iframe.contentDocument || iframe.contentWindow.document;

          // Check if mobile menu elements exist
          const mobileMenuToggle = iframeDoc.getElementById("mobileMenuToggle");
          const mobileMenu = iframeDoc.getElementById("mobileMenu");

          if (mobileMenuToggle && mobileMenu) {
            resultsDiv.innerHTML +=
              '<div class="test-result pass">‚úÖ Mobile menu elements found</div>';

            // Check if mobile menu toggle is visible
            const toggleStyle =
              iframeDoc.defaultView.getComputedStyle(mobileMenuToggle);
            const isVisible = toggleStyle.display !== "none";

            if (isVisible) {
              resultsDiv.innerHTML +=
                '<div class="test-result pass">‚úÖ Mobile menu toggle is visible</div>';
            } else {
              resultsDiv.innerHTML +=
                '<div class="test-result fail">‚ùå Mobile menu toggle is hidden (check viewport width)</div>';
            }

            // Test click functionality
            try {
              mobileMenuToggle.click();
              setTimeout(() => {
                const isActive = mobileMenu.classList.contains("active");
                if (isActive) {
                  resultsDiv.innerHTML +=
                    '<div class="test-result pass">‚úÖ Mobile menu opens on click</div>';

                  // Test closing
                  mobileMenuToggle.click();
                  setTimeout(() => {
                    const isClosed = !mobileMenu.classList.contains("active");
                    if (isClosed) {
                      resultsDiv.innerHTML +=
                        '<div class="test-result pass">‚úÖ Mobile menu closes on second click</div>';
                    } else {
                      resultsDiv.innerHTML +=
                        '<div class="test-result fail">‚ùå Mobile menu does not close properly</div>';
                    }
                  }, 100);
                } else {
                  resultsDiv.innerHTML +=
                    '<div class="test-result fail">‚ùå Mobile menu does not open on click</div>';
                }
              }, 100);
            } catch (error) {
              resultsDiv.innerHTML += `<div class="test-result fail">‚ùå Error testing click: ${error.message}</div>`;
            }
          } else {
            resultsDiv.innerHTML +=
              '<div class="test-result fail">‚ùå Mobile menu elements not found</div>';
          }
        } catch (error) {
          resultsDiv.innerHTML += `<div class="test-result fail">‚ùå Error accessing iframe: ${error.message}</div>`;
        }
      }

      // Check viewport size
      function updateViewportInfo() {
        const width = window.innerWidth;
        const height = window.innerHeight;
        console.log(`Viewport: ${width}x${height}`);

        if (width <= 768) {
          console.log(
            "Mobile viewport detected - hamburger menu should be visible"
          );
        } else {
          console.log(
            "Desktop viewport detected - hamburger menu should be hidden"
          );
        }
      }

      window.addEventListener("load", updateViewportInfo);
      window.addEventListener("resize", updateViewportInfo);

      console.log("üì± Mobile Menu Test loaded");
      console.log(
        "üì± Current viewport:",
        window.innerWidth + "x" + window.innerHeight
      );
    </script>
  </body>
</html>
